<?xml version="1.0" encoding="UTF-8" ?>
<Schema name="datachile">

  <!-- BEGIN: Shared Dimensions -->
  <Dimension name="Date" type="TimeDimension">
    <Hierarchy hasAll="true" primaryKey="id">
      <Table name="dim_date" schema="public"/>
      <Level column="the_year" levelType="TimeYears" name="Year" type="Numeric" uniqueMembers="true"/>
      <Level column="month_of_year" levelType="TimeMonths" name="Month" type="Numeric" uniqueMembers="false">
	      <CaptionExpression>
	        <SQL>
	          <![CDATA[(the_year || '/' || month_of_year)]]>
	        </SQL>
	      </CaptionExpression>
      </Level>
      <Level column="day_of_month" levelType="TimeDays" name="Day" type="Numeric" uniqueMembers="false"/>
    </Hierarchy>
  </Dimension>

  <Dimension name="Geography">
    <Annotations>
      <Annotation name="index_as">geo</Annotation>
    </Annotations>
    <Hierarchy hasAll="true" primaryKey="id">
      <Table name="dim_comunas" schema="public"/>
      <Level column="region_id" name="Region" nameColumn="region_name" uniqueMembers="true"/>
      <Level column="comuna_datachile_id" name="Comuna" nameColumn="comuna_name" uniqueMembers="true"/>
    </Hierarchy>
  </Dimension>

  <Dimension name="Geography Region">
    <Hierarchy hasAll="true" primaryKey="region_id" name="Geography">
    	<View alias="dim_regions">
    	  <SQL>(SELECT distinct(region_id), region_name from dim_comunas)</SQL>
    	</View>
    	<Level column="region_id" name="Region" nameColumn="region_name" uniqueMembers="true"/>
    </Hierarchy>
  </Dimension>

  <Dimension name="Country">
    <Annotations>
      <Annotation name="index_as">countries</Annotation>
      <Annotation name="es_element_caption">País</Annotation>
    </Annotations>
    <Hierarchy hasAll="true" primaryKey="country_code">
      <Table name="dim_countries_new" schema="public"/>
      <Level column="region_code" name="Continent" nameColumn="region" uniqueMembers="true">
        <Annotations>
          <Annotation name="es_caption">Region ES</Annotation>
        </Annotations>
        <Property column="es_region" name="Region ES"/>
      </Level>
      <!-- Level column="sub_region_code" name="Subregion" nameColumn="sub_region" uniqueMembers="true"/ -->
      <Level column="country_code" name="Country" nameColumn="country_name" uniqueMembers="true">
        <Annotations>
          <Annotation name="es_caption">Country ES</Annotation>
        </Annotations>
        <Property column="es_country_name" name="Country ES"/>
        <Property column="iso3" name="iso3"/>
      </Level>
    </Hierarchy>
  </Dimension>

  <Dimension name="HS">
    <Annotations>
      <Annotation name="index_as">products</Annotation>
      <Annotation name="index_max_depth">2</Annotation>
      <Annotation name="es_element_caption">Sistema Harmonizado</Annotation>
    </Annotations>
    <Hierarchy hasAll="true" primaryKey="level5">
      <Table name="dim_hs2012" schema="economy"/>
      <Level column="level0" name="HS0" nameColumn="level0_en" uniqueMembers="true">
        <Annotations>
          <Annotation name="es_caption">HS0 ES</Annotation>
        </Annotations>
        <Property column="level0_es" name="HS0 ES"/>
      </Level>
      <Level column="level3" name="HS2" nameColumn="level3_en" uniqueMembers="true">
        <Annotations>
          <Annotation name="es_caption">HS2 ES</Annotation>
        </Annotations>
        <Property column="level3_es" name="HS2 ES"/>
      </Level>
      <Level column="level5" name="HS4" nameColumn="level5_en" uniqueMembers="true">
        <Annotations>
          <Annotation name="es_caption">HS4 ES</Annotation>
        </Annotations>
        <Property column="level5_es" name="HS4 ES"/>
      </Level>
    </Hierarchy>
  </Dimension>


  <Dimension name="ISICrev4">
    <Annotations>
      <Annotation name="index_as">industries</Annotation>
      <Annotation name="index_max_depth">2</Annotation>
    </Annotations>
    <Hierarchy hasAll="true" primaryKey="level4">
      <Table name="dim_isic" schema="public"/>
      <Level column="level1" name="Level 1" nameColumn="level1_description" uniqueMembers="true">
        <Annotations>
          <Annotation name="es_caption">Level 1 ES</Annotation>
        </Annotations>
        <Property column="es_level1_description" name="Level 1 ES"/>
      </Level>
      <Level column="level2" name="Level 2" nameColumn="level2_description" uniqueMembers="true">
        <Annotations>
          <Annotation name="es_caption">Level 2 ES</Annotation>
        </Annotations>
        <Property column="es_level2_description" name="Level 2 ES"/>
      </Level>
      <Level column="level3" name="Level 3" nameColumn="level3_description" uniqueMembers="true">
        <Annotations>
          <Annotation name="es_caption">Level 3 ES</Annotation>
        </Annotations>
        <Property column="es_level3_description" name="Level 3 ES"/>
      </Level>
      <Level column="level4" name="Level 4" nameColumn="level4_description" uniqueMembers="true">
        <Annotations>
          <Annotation name="es_caption">Level 4 ES</Annotation>
        </Annotations>
        <Property column="es_level4_description" name="Level 4 ES"/>
      </Level>
    </Hierarchy>
  </Dimension>

  <Dimension name="ISICrev4 Level 1">
    <Hierarchy hasAll="true" primaryKey="level1" name="ISICrev4">
    	<View alias="dim_isic">
    	  <SQL><![CDATA[(select distinct(level1) AS level1, level1_description, es_level1_description from dim_isic)]]></SQL>
    	</View>
    	<Level column="level1" name="Level 1" nameColumn="level1_description" uniqueMembers="true">
        <Annotations>
          <Annotation name="es_caption">Description ES</Annotation>
        </Annotations>
        <Property column="es_level1_description" name="Description ES"/>
      </Level>
    </Hierarchy>
  </Dimension>


  <Dimension name="Sex">
    <Annotations>
      <Annotation name="es_element_caption">Sexo</Annotation>
    </Annotations>
    <Hierarchy hasAll="true" primaryKey="sex_id">
      <InlineTable alias="dim_sex">
        <ColumnDefs>
          <ColumnDef name="sex_id" type="Numeric"/>
          <ColumnDef name="description" type="String"/>
          <ColumnDef name="es_description" type="String"/>
        </ColumnDefs>
        <Rows>
          <Row>
            <Value column="sex_id">0</Value>
            <Value column="description">No data</Value>
            <Value column="es_description">No informa</Value>
          </Row>
          <Row>
            <Value column="sex_id">2</Value>
            <Value column="description">Male</Value>
            <Value column="es_description">Masculino</Value>
          </Row>
          <Row>
            <Value column="sex_id">1</Value>
            <Value column="description">Female</Value>
            <Value column="es_description">Femenino</Value>
          </Row>
        </Rows>
      </InlineTable>
      <Level column="sex_id" name="Sex" nameColumn="description" uniqueMembers="true" caption="Sex">
        <Annotations>
          <Annotation name="es_caption">Description ES</Annotation>
          <Annotation name="es_element_caption">Sexo</Annotation>
        </Annotations>
        <Property column="es_description" name="Description ES"/>
      </Level>
    </Hierarchy>
  </Dimension>

  <Dimension name="ISCED">
    <Hierarchy hasAll="true">
      <InlineTable alias="isced">
        <ColumnDefs>
          <ColumnDef name="id" type="Numeric"/>
          <ColumnDef name="description" type="String"/>
          <ColumnDef name="es_description" type="String"/>
        </ColumnDefs>
        <Rows>
          <Row>
            <Value column="id">9</Value>
            <Value column="description">Doctorate</Value>
            <Value column="es_description">Doctorado</Value>
          </Row>
          <Row>
            <Value column="id">2</Value>
            <Value column="description">Early childhood education</Value>
            <Value column="es_description">Educación Preescolar</Value>
          </Row>
          <Row>
            <Value column="id">3</Value>
            <Value column="description">Primary education</Value>
            <Value column="es_description">Educación Primaria (nivel 1)</Value>
          </Row>
          <Row>
            <Value column="id">4</Value>
            <Value column="description">Lower secondary education</Value>
            <Value column="es_description">Educación Primaria (nivel 2)</Value>
          </Row>
          <Row>
            <Value column="id">5</Value>
            <Value column="description">Upper secondary education</Value>
            <Value column="es_description">Educación Secundaria</Value>
          </Row>
          <Row>
            <Value column="id">6</Value>
            <Value column="description">Post-secondary non-tertiary education</Value>
            <Value column="es_description">Educación Técnica (Educación Superior no Universitaria)</Value>
          </Row>
          <Row>
            <Value column="id">7</Value>
            <Value column="description">Bachelor’s or equivalent level</Value>
            <Value column="es_description">Educación Universitaria</Value>
          </Row>
          <Row>
            <Value column="id">999</Value>
            <Value column="description">No data</Value>
            <Value column="es_description">Nivel ignorado</Value>
          </Row>
          <Row>
            <Value column="id">1</Value>
            <Value column="description">No studies</Value>
            <Value column="es_description">Nunca estudió</Value>
          </Row>
          <Row>
            <Value column="id">8</Value>
            <Value column="description">Master’s or equivalent level</Value>
            <Value column="es_description">Postítulo y Maestría</Value>
          </Row>
          <Row>
            <Value column="id">0</Value>
            <Value column="description">Don't know/No Answer</Value>
            <Value column="es_description">No sabe/No responde</Value>
          </Row>
        </Rows>
      </InlineTable>
      <Level column="id" name="ISCED" nameColumn="description" uniqueMembers="true">
        <Annotations>
          <Annotation name="es_caption">Description ES</Annotation>
        </Annotations>
        <Property column="es_description" name="Description ES"/>
      </Level>
    </Hierarchy>
  </Dimension>

  <Dimension name="ICSE">
    <Hierarchy hasAll="true">
      <InlineTable alias="icse">
        <ColumnDefs>
          <ColumnDef name="id" type="Numeric"/>
          <ColumnDef name="description" type="String"/>
          <ColumnDef name="es_description" type="String"/>
        </ColumnDefs>
        <Rows>
          <Row>
            <Value column="id">3</Value>
            <Value column="description">Wage earner in the Private Sector</Value>
            <Value column="es_description">Asalariado Sector Privado</Value>
          </Row>
          <Row>
            <Value column="id">4</Value>
            <Value column="description">Wage earner in the Public Sector</Value>
            <Value column="es_description">Asalariado Sector Público</Value>
          </Row>
          <Row>
            <Value column="id">2</Value>
            <Value column="description">Own-account worker</Value>
            <Value column="es_description">Cuenta Propia</Value>
          </Row>
          <Row>
            <Value column="id">1</Value>
            <Value column="description">Employer</Value>
            <Value column="es_description">Empleador</Value>
          </Row>
          <Row>
            <Value column="id">5</Value>
            <Value column="description">Domestic service (live-in)</Value>
            <Value column="es_description">Personal de Servicio Doméstico Puertas Adentro</Value>
          </Row>
          <Row>
            <Value column="id">6</Value>
            <Value column="description">Domestic service (live-out)</Value>
            <Value column="es_description">Personal de Servicio Doméstico Puertas Afuera</Value>
          </Row>
          <Row>
            <Value column="id">0</Value>
            <Value column="description">Don't know/No Answer</Value>
            <Value column="es_description">No sabe/No responde</Value>
          </Row>
	  <Row>
            <Value column="id">7</Value>
            <Value column="description">Relative or unpaid worker</Value>
            <Value column="es_description">Familiar o personal no remunerado</Value>
          </Row>
        </Rows>
      </InlineTable>
      <Level column="id" name="ICSE" nameColumn="description" uniqueMembers="true">
        <Annotations>
          <Annotation name="es_caption">Description ES</Annotation>
        </Annotations>
        <Property column="es_description" name="Description ES"/>
      </Level>
    </Hierarchy>
  </Dimension>

  <Dimension name="ISCO">
    <Hierarchy hasAll="true">
      <InlineTable alias="isco">
        <ColumnDefs>
          <ColumnDef name="id" type="Numeric"/>
          <ColumnDef name="description" type="String"/>
          <ColumnDef name="es_description" type="String"/>
        </ColumnDefs>
        <Rows>
          <Row>
            <Value column="id">6</Value>
            <Value column="description">Skilled agricultural and fishery workers</Value>
            <Value column="es_description">Agricultores y trabajadores calificados agropecuarios y pesqueros</Value>
          </Row>
          <Row>
            <Value column="id">4</Value>
            <Value column="description">Clerks</Value>
            <Value column="es_description">Empleados de oficina</Value>
          </Row>
          <Row>
            <Value column="id">1</Value>
            <Value column="description">Legislators, senior officials and managers</Value>
            <Value column="es_description">Funcionarios públicos y personal directivo de la administración pública y empresas</Value>
          </Row>
          <Row>
            <Value column="id">7</Value>
            <Value column="description">Craft and related trade workers</Value>
            <Value column="es_description">Oficiales, operarios y artesanos de artes mecánicas y de otros oficios</Value>
          </Row>
          <Row>
            <Value column="id">8</Value>
            <Value column="description">Plant and machine operators, and assemblers</Value>
            <Value column="es_description">Operadores de instalaciones y máquinas y montadores</Value>
          </Row>
          <Row>
            <Value column="id">10</Value>
            <Value column="description">Others not identified</Value>
            <Value column="es_description">Otros no identificados</Value>
          </Row>
          <Row>
            <Value column="id">2</Value>
            <Value column="description">Professionals</Value>
            <Value column="es_description">Profesionales científicos e intelectuales</Value>
          </Row>
          <Row>
            <Value column="id">3</Value>
            <Value column="description">Technicians and associated professionals</Value>
            <Value column="es_description">Técnicos y profesionales de nivel medio</Value>
          </Row>
          <Row>
            <Value column="id">5</Value>
            <Value column="description">Service workers and shop and market sales workers</Value>
            <Value column="es_description">Trabajadores de los servicios y vendedores de comercios y mercados</Value>
          </Row>
          <Row>
            <Value column="id">9</Value>
            <Value column="description">Elementary occupations</Value>
            <Value column="es_description">Trabajadores no calificados</Value>
          </Row>
          <Row>
            <Value column="id">0</Value>
            <Value column="description">Don't know/No Answer</Value>
            <Value column="es_description">No sabe/No responde</Value>
          </Row>
        </Rows>
      </InlineTable>
      <Level column="id" name="ISCO" nameColumn="description" uniqueMembers="true">
        <Annotations>
          <Annotation name="es_caption">Description ES</Annotation>
        </Annotations>
        <Property column="es_description" name="Description ES"/>
      </Level>
    </Hierarchy>
  </Dimension>

  <Dimension name="Binary Survey Response">
    <Hierarchy hasAll="true">
      <InlineTable alias="survey_response">
        <ColumnDefs>
          <ColumnDef name="id" type="Numeric"/>
          <ColumnDef name="description" type="String"/>
          <ColumnDef name="es_description" type="String"/>
        </ColumnDefs>
        <Rows>
          <Row>
            <Value column="id">0</Value>
            <Value column="description">No data</Value>
            <Value column="es_description">No informa</Value>
          </Row>
          <Row>
            <Value column="id">1</Value>
            <Value column="description">No</Value>
            <Value column="es_description">No</Value>
          </Row>
          <Row>
            <Value column="id">2</Value>
            <Value column="description">Yes</Value>
            <Value column="es_description">Sí</Value>
          </Row>
        </Rows>
      </InlineTable>
      <Level column="id" name="Binary Survey Response" nameColumn="description" uniqueMembers="true">
        <Annotations>
          <Annotation name="es_caption">Description ES</Annotation>
        </Annotations>
        <Property column="es_description" name="Description ES"/>
      </Level>
    </Hierarchy>
  </Dimension>

  <Dimension name="Frequency Survey Response">
    <Hierarchy hasAll="true">
      <InlineTable alias="frequency_response">
        <ColumnDefs>
          <ColumnDef name="id" type="Numeric"/>
          <ColumnDef name="description" type="String"/>
          <ColumnDef name="es_description" type="String"/>
        </ColumnDefs>
        <Rows>
          <Row>
            <Value column="id">1</Value>
            <Value column="description">Never</Value>
            <Value column="es_description">nunca</Value>
          </Row>
          <Row>
            <Value column="id">2</Value>
            <Value column="description">Sometimes</Value>
            <Value column="es_description">pocas veces</Value>
          </Row>
          <Row>
            <Value column="id">3</Value>
            <Value column="description">Very Often</Value>
            <Value column="es_description">muchas veces</Value>
          </Row>
          <Row>
            <Value column="id">4</Value>
            <Value column="description">Always</Value>
            <Value column="es_description">siempre</Value>
          </Row>
        </Rows>
      </InlineTable>
      <Level column="id" name="Frequency Survey Response" nameColumn="description" uniqueMembers="true">
        <Annotations>
          <Annotation name="es_caption">Description ES</Annotation>
        </Annotations>
        <Property column="es_description" name="Description ES"/>
      </Level>
    </Hierarchy>
  </Dimension>

  <Dimension name="Energy Source Survey Response">
    <Hierarchy hasAll="true">
      <InlineTable alias="energy_source_response">
        <ColumnDefs>
          <ColumnDef name="id" type="Numeric"/>
          <ColumnDef name="description" type="String"/>
          <ColumnDef name="es_description" type="String"/>
        </ColumnDefs>
        <Rows>
          <Row>
            <Value column="id">1</Value>
            <Value column="description">Gas</Value>
            <Value column="es_description">Gas (licuado o de cañería)</Value>
          </Row>
          <Row>
            <Value column="id">2</Value>
            <Value column="description">Oil</Value>
            <Value column="es_description">Parafina o petróleo</Value>
          </Row>
          <Row>
            <Value column="id">3</Value>
            <Value column="description">Firewood</Value>
            <Value column="es_description">Leña o derivados (pellets, astillas o briquetas)</Value>
          </Row>
          <Row>
            <Value column="id">4</Value>
            <Value column="description">Coal</Value>
            <Value column="es_description">Carbón</Value>
          </Row>
          <Row>
            <Value column="id">5</Value>
            <Value column="description">Electricity</Value>
            <Value column="es_description">Electricidad</Value>
          </Row>
          <Row>
            <Value column="id">6</Value>
            <Value column="description">Solar</Value>
            <Value column="es_description">Energía solar</Value>
          </Row>
          <Row>
            <Value column="id">7</Value>
            <Value column="description">Doesn't use fuel</Value>
            <Value column="es_description">No usa combustible o fuente de energía</Value>
          </Row>
          <Row>
            <Value column="id">8</Value>
            <Value column="description">Doesn't have system</Value>
            <Value column="es_description">No tiene sistema</Value>
          </Row>
        </Rows>
      </InlineTable>
      <Level column="id" name="Energy Source Survey Response" nameColumn="description" uniqueMembers="true">
        <Annotations>
          <Annotation name="es_caption">Description ES</Annotation>
        </Annotations>
        <Property column="es_description" name="Description ES"/>
      </Level>
    </Hierarchy>
  </Dimension>

  <Dimension name="Age Range">
    <Annotations>
      <Annotation name="es_element_caption">Rango etario</Annotation>
    </Annotations>

    <Hierarchy hasAll="true">
      <InlineTable alias="age_range">
	      <ColumnDefs>
	        <ColumnDef name="id" type="Numeric"/>
	        <ColumnDef name="description" type="String"/>
	        <ColumnDef name="es_description" type="String"/>
	      </ColumnDefs>
	      <Rows>
	        <Row>
	          <Value column="id">0</Value>
	          <Value column="description">No data</Value>
	          <Value column="es_description">No informa</Value>
	        </Row>
	        <Row>
	          <Value column="id">1</Value>
	          <Value column="description">Less than 15</Value>
	          <Value column="es_description">Menos de 15</Value>
	        </Row>
	        <Row>
	          <Value column="id">2</Value>
	          <Value column="description">15 to 19</Value>
	          <Value column="es_description">15 a 19</Value>
	        </Row>
	        <Row>
	          <Value column="id">3</Value>
	          <Value column="description">20 to 24</Value>
	          <Value column="es_description">20 a 24</Value>
	        </Row>
	        <Row>
	          <Value column="id">4</Value>
	          <Value column="description">25 to 29</Value>
	          <Value column="es_description">25 a 29</Value>
	        </Row>
	        <Row>
	          <Value column="id">5</Value>
	          <Value column="description">30 to 65</Value>
	          <Value column="es_description">30 a 65</Value>
	        </Row>
	        <Row>
	          <Value column="id">6</Value>
	          <Value column="description">Older than 65</Value>
	          <Value column="es_description">Mas de 65</Value>
	        </Row>
	      </Rows>
      </InlineTable>
      <Level column="id" name="Age Range" nameColumn="description" uniqueMembers="true">
        <Annotations>
          <Annotation name="es_caption">Description ES</Annotation>
        </Annotations>
        <Property column="es_description" name="Description ES"/>
      </Level>
    </Hierarchy>
  </Dimension>

  <Dimension name="Zone">
    <Annotations>
      <Annotation name="es_element_caption">Zona</Annotation>
    </Annotations>

    <Hierarchy hasAll="true">
      <InlineTable alias="zone">
        <ColumnDefs>
          <ColumnDef name="id" type="Numeric"/>
          <ColumnDef name="description" type="String"/>
          <ColumnDef name="es_description" type="String"/>
        </ColumnDefs>
        <Rows>
          <Row>
            <Value column="id">0</Value>
            <Value column="description">No data</Value>
            <Value column="es_description">No informa</Value>
          </Row>
          <Row>
            <Value column="id">1</Value>
            <Value column="description">Urban</Value>
            <Value column="es_description">Urbano</Value>
          </Row>
          <Row>
            <Value column="id">2</Value>
            <Value column="description">Rural</Value>
            <Value column="es_description">Rural</Value>
          </Row>
        </Rows>
      </InlineTable>
      <Level column="id" name="Zone" nameColumn="description" uniqueMembers="true">
        <Annotations>
          <Annotation name="es_caption">Description ES</Annotation>
        </Annotations>
        <Property column="es_description" name="Description ES"/>
      </Level>
    </Hierarchy>
  </Dimension>

  <Dimension name="Administration">
    <Annotations>
      <Annotation name="es_element_caption">Tipo de administración</Annotation>
    </Annotations>
      
    <Hierarchy hasAll="true">
      <InlineTable alias="administration">
        <ColumnDefs>
          <ColumnDef name="id" type="Numeric"/>
          <ColumnDef name="description" type="String"/>
          <ColumnDef name="es_description" type="String"/>
        </ColumnDefs>
        <Rows>
          <Row>
            <Value column="id">0</Value>
            <Value column="description">No data</Value>
            <Value column="es_description">No informa</Value>
          </Row>
          <Row>
            <Value column="id">1</Value>
            <Value column="description">Corporación Municipal</Value>
            <Value column="es_description">Corporación Municipal</Value>
          </Row>
          <Row>
            <Value column="id">2</Value>
            <Value column="description">Municipal DAEM</Value>
            <Value column="es_description">Municipal DAEM</Value>
          </Row>
          <Row>
            <Value column="id">3</Value>
            <Value column="description">Particular Subvencionado</Value>
            <Value column="es_description">Particular Subvencionado</Value>
          </Row>
          <Row>
            <Value column="id">4</Value>
            <Value column="description">Particular Pagado</Value>
            <Value column="es_description">Particular Pagado</Value>
          </Row>
          <Row>
            <Value column="id">5</Value>
            <Value column="description">Corporación de Administración Delegada</Value>
            <Value column="es_description">Corporación de Administración Delegada</Value>
          </Row>
        </Rows>
      </InlineTable>
      
      <Level column="id" name="Administration" nameColumn="description" uniqueMembers="true">
        <Annotations>
          <Annotation name="es_caption">Description ES</Annotation>
        </Annotations>
        <Property column="es_description" name="Description ES"/>
      </Level>
    </Hierarchy>
  </Dimension>

  <Dimension name="Institution">
    <Annotations>
      <Annotation name="es_element_caption">Institución</Annotation>
    </Annotations>

    <Hierarchy hasAll="true" primaryKey="institution_id">
      <Table name="dim_educational_institutions" schema="education"/>
      <Level column="institution_id" name="Institution" nameColumn="institution" uniqueMembers="true"/>
    </Hierarchy>
  </Dimension>

  <!-- Institutions from official directory: http://pacha.datawheel.us/datachile/education/establishments/analysis/2_performance/directorio_oficial_2016.csv
       XXX TODO this should become the only list of schools in chilecube. `Institution` (the dimension above this one) should be removed -->
  <Dimension name="Institution New">
    <Annotations>
      <Annotation name="es_element_caption">Institución</Annotation>
    </Annotations>

    <Hierarchy hasAll="true" primaryKey="rbd" name="Institution">
      <Table name="dim_educational_institutions_new" schema="education"/>
      <Level column="cod_depe2" name="Administration" uniqueMembers="true">
        <Annotations>
          <Annotation name="es_caption">Description ES</Annotation>
        </Annotations>
        <NameExpression>
          <SQL><![CDATA[(CASE WHEN cod_depe2=1 THEN 'Municipal' WHEN cod_depe2=2 THEN 'Private Subsidized' WHEN cod_depe2=3 THEN 'Private' WHEN cod_depe2=4 THEN 'Delegated Administration' END)]]></SQL>
        </NameExpression>
	<Property column="cod_depe2_es" name="Description ES"/>
      </Level>
      <Level column="rbd" name="Institution" nameColumn="nom_rbd" uniqueMembers="true"/>
    </Hierarchy>
  </Dimension>

  <Dimension name="Teaching">
    <Annotations>
      <Annotation name="es_element_caption">Tipo de Enseñanza</Annotation>
    </Annotations>

    <Hierarchy hasAll="true" primaryKey="teaching_id">
      <Table name="dim_teachings" schema="education"/>
      <Level column="teaching_id" name="Teaching" nameColumn="teaching_en" uniqueMembers="true">
        <Annotations>
          <Annotation name="es_caption">Description ES</Annotation>
        </Annotations>
        <Property column="teaching" name="Description ES"/>
      </Level>
    </Hierarchy>
  </Dimension>

  <Dimension name="Election Type">
    <Annotations>
      <Annotation name="es_element_caption">Tipo de elección</Annotation>
    </Annotations>

      <Hierarchy hasAll="true">
        <InlineTable alias="election">
          <ColumnDefs>
            <ColumnDef name="id" type="Numeric"/>
            <ColumnDef name="description" type="String"/>
            <ColumnDef name="es_description" type="String"/>
          </ColumnDefs>
          <Rows>
            <Row>
              <Value column="id">1</Value>
              <Value column="description">Presidente - 1st round</Value>
              <Value column="es_description">Presidente - 1ra vuelta</Value>
            </Row>
            <Row>
              <Value column="id">2</Value>
              <Value column="description">Presidente - 2nd round</Value>
              <Value column="es_description">Presidente - 2da vuelta</Value>
            </Row>
            <Row>
              <Value column="id">3</Value>
              <Value column="description">Senator</Value>
              <Value column="es_description">Senador</Value>
            </Row>
            <Row>
              <Value column="id">4</Value>
              <Value column="description">Congressperson</Value>
              <Value column="es_description">Diputado</Value>
            </Row>
            <Row>
              <Value column="id">5</Value>
              <Value column="description">Mayor</Value>
              <Value column="es_description">Alcalde</Value>
            </Row>
          </Rows>
        </InlineTable>
        
        <Level column="id" name="Election Type" nameColumn="description" uniqueMembers="true">
          <Annotations>
            <Annotation name="es_caption">Description ES</Annotation>
          </Annotations>
          <Property column="es_description" name="Description ES"/>
        </Level>
      </Hierarchy>
    </Dimension>

  <!-- END: Shared Dimensions -->

  <Cube name="exports">
    <Annotations>
      <Annotation name="source_name">Servicio Nacional de Aduanas</Annotation>
      <Annotation name="source_link">http://www.aduana.cl/aduana/site/edic/base/port/inicio.html</Annotation>
      <Annotation name="topic">economy</Annotation>
    </Annotations>

    <!-- Table name="fact_exports" schema="economy"/ -->
    <View alias="fact_exports">
      <SQL>
	<![CDATA[(SELECT * FROM economy.fact_exports WHERE "year" >= 2011)]]>
      </SQL>
    </View>

    <Dimension name="Date">
      <Hierarchy hasAll="true">
        <Level column="year" nameColumn="year" name="Year" uniqueMembers="true"/>
      </Hierarchy>
    </Dimension>

    <DimensionUsage caption="Destination Country" foreignKey="country_code" name="Destination Country" source="Country"/>
    <DimensionUsage foreignKey="comuna_datachile_id" name="Geography" source="Geography"/>
    <DimensionUsage foreignKey="hs12" name="Export HS" source="HS"/>

    <!-- duplicate of dimension `Destination Country` called `Country`, so we can use it in the VirtualCube exports_and_imports -->
    <DimensionUsage caption="Country" foreignKey="country_code" name="Country" source="Country"/>

    <Measure aggregator="sum" column="fob_value_usd" name="FOB US" caption="Exports (USD FOB)">
      <Annotations>
        <Annotation name="es_element_caption">Exportaciones (FOB USD)</Annotation>
        <Annotation name="es_format">XXX</Annotation>
      </Annotations>
    </Measure>

    <CalculatedMember dimension="Measures" name="Geo Rank">
      <Formula>
        <![CDATA[IIf(IsEmpty([Measures].[FOB US]),
                 Null,
                 Rank([Geography].CurrentMember,
                 Order([Geography].CurrentMember.Siblings,
                 Measures.[FOB US], BDESC)))]]>
      </Formula>
    </CalculatedMember>

    <CalculatedMember dimension="Measures" name="Geo Rank Across Time">
      <Annotations>
        <Annotation name="description">Rank of this geography across all its siblings, by time</Annotation>
      </Annotations>
      <Formula>
        <![CDATA[Iif(IsEmpty([Measures].[FOB US]),
                 Null,
                 Rank([Geography].CurrentMember,
                 Order([Geography].CurrentMember.Siblings,
                 Aggregate({[Date].CurrentMember}*{[Destination Country].[All Countrys]}*{[Export HS].[All HSs]},
                 [Measures].[FOB US]),
                 BDESC)))]]>

      </Formula>
    </CalculatedMember>

    <CalculatedMember dimension="Measures" name="HS Rank">
      <Formula>
        <![CDATA[Rank([Export HS].CurrentMember,
                 Order([Export HS].CurrentMember.Level.Members,
                 Measures.[FOB US], BDESC))]]>
      </Formula>
    </CalculatedMember>

    <CalculatedMember dimension="Measures" name="HS Rank Decile" visible="true">
      <Formula>
        <![CDATA[((count([Export HS].CurrentMember.Level.Members)-Measures.[HS Rank]+1) * 10) / count([Export HS].CurrentMember.Level.Members)]]>
      </Formula>
    </CalculatedMember>

    <CalculatedMember dimension="Measures" name="HS Rank Total" visible="true">
      <Formula>
        <![CDATA[count([Export HS].CurrentMember.Level.Members)]]>
      </Formula>
    </CalculatedMember>

    <CalculatedMember dimension="Measures" name="Exports for year (sum_c_p_xcp)" visible="true"> <!-- all geos, all products, current year -->
      <Formula>
        <![CDATA[(Measures.[FOB US], [Date].[Year].CurrentMember, [Export HS].[HS].[All HSs], [Geography].[Geography].[All Geographys])]]>
      </Formula>
    </CalculatedMember>

    <CalculatedMember dimension="Measures" name="Exports for Geography and year (sum_p_xcp)" visible="false"> <!-- all products, current geo, current year -->
      <Formula>
        <![CDATA[(Measures.[FOB US], [Date].[Year].CurrentMember, [Export HS].[HS].[All HSs], [Geography].[Geography].CurrentMember)]]>
      </Formula>
    </CalculatedMember>

    <CalculatedMember dimension="Measures" name="Exports for Product and year (sum_c_xcp)" visible="false"> <!-- all geos, current product, current year -->
      <Formula>
        <![CDATA[(Measures.[FOB US], [Date].[Year].CurrentMember, [Export HS].[HS].CurrentMember, [Geography].[Geography].[All Geographys])]]>
      </Formula>
    </CalculatedMember>
    
    <CalculatedMember dimension="Measures" name="Exports RCA">
      <Formula><![CDATA[(Measures.[FOB US] / Measures.[Exports for Product and year (sum_c_xcp)]) / (Measures.[Exports for Geography and year (sum_p_xcp)] / Measures.[Exports for year (sum_c_p_xcp)]) ]]></Formula>
    </CalculatedMember>
  </Cube>


  <Cube name="imports">
    <Annotations>
      <Annotation name="source_name">Servicio Nacional de Aduanas</Annotation>
      <Annotation name="source_link">http://www.aduana.cl/aduana/site/edic/base/port/inicio.html</Annotation>
      <Annotation name="topic">economy</Annotation>
    </Annotations>

    <!-- Table name="fact_imports" schema="economy" / -->
    <View alias="fact_imports">
      <SQL>
	<![CDATA[(SELECT * FROM economy.fact_imports WHERE "year" >= 2011)]]>
      </SQL>
    </View>


    <Dimension name="Date">
      <Hierarchy hasAll="true">
        <Level column="year" nameColumn="year" name="Year" uniqueMembers="true"/>
      </Hierarchy>
    </Dimension>

    <DimensionUsage caption="Origin Country" foreignKey="country_code" name="Origin Country" source="Country"/>
    <DimensionUsage foreignKey="comuna_datachile_id" name="Geography" source="Geography"/>
    <DimensionUsage foreignKey="hs12" name="Import HS" source="HS"/>

    <!-- duplicate of dimension `Destination Country` called `Country`, so we can use it in the VirtualCube exports_and_imports -->
    <DimensionUsage caption="Country" foreignKey="country_code" name="Country" source="Country"/>


    <Measure aggregator="sum" column="cif_value_usd" name="CIF US">
      <Annotations>
        <Annotation name="es_element_caption">Importaciones (CIF USD)</Annotation>
        <Annotation name="es_format">XXX</Annotation>
      </Annotations>
    </Measure>

    <CalculatedMember dimension="Measures" name="Geo Rank Across Time">
      <Annotations>
        <Annotation name="description">Rank of this geography across all its siblings, by time</Annotation>
      </Annotations>
      <Formula>
        <![CDATA[Iif(IsEmpty([Measures].[CIF US]),
                 Null,
                 Rank([Geography].CurrentMember,
                 Order([Geography].CurrentMember.Siblings,
                 Aggregate({[Date].CurrentMember}*{[Origin Country].[All Countrys]}*{[Import HS].[All HSs]},
                 [Measures].[CIF US]),
                 BDESC)))]]>
      </Formula>
    </CalculatedMember>
  </Cube>

  <Cube name="imports_old">
    <Annotations>
      <Annotation name="source_name">Servicio Nacional de Aduanas</Annotation>
      <Annotation name="source_link">http://www.aduana.cl/aduana/site/edic/base/port/inicio.html</Annotation>
    </Annotations>
    <!-- Table name="pg_imports_grouped" schema="economy"></Table -->

    <View alias="pg_imports_grouped">
      <SQL>
	      <![CDATA[(SELECT * FROM economy.pg_imports_grouped INNER JOIN dim_date d ON d.id = economy.pg_imports_grouped.date_id WHERE d.the_year >= 2002)]]>
      </SQL>
    </View>

    <DimensionUsage foreignKey="date_id" name="Date" source="Date"/>
    <DimensionUsage caption="Origin Country" foreignKey="country_origin_id" name="Origin Country" source="Country"/>
    <DimensionUsage foreignKey="importer_comuna_id" name="Geography" source="Geography"/>
    <DimensionUsage foreignKey="hs_6digits" name="Import HS" source="HS" />

    <!-- duplicate of dimension `Origin Country` called `Country`, so we can use it in the VirtualCube exports_and_imports -->
    <DimensionUsage caption="Country" foreignKey="country_origin_id" name="Country" source="Country"/>

    <Measure aggregator="sum" column="cif_us" name="CIF US"/>

    <CalculatedMember dimension="Measures" name="Geo Rank Across Time">
      <Annotations>
        <Annotation name="description">Rank of this geography across all its siblings, by time</Annotation>
      </Annotations>
      <Formula>
        <![CDATA[Iif(IsEmpty([Measures].[CIF US]),
                 Null,
                 Rank([Geography].CurrentMember,
                 Order([Geography].CurrentMember.Siblings,
                 Aggregate({[Date].CurrentMember}*{[Origin Country].[All Countrys]}*{[Import HS].[All HSs]},
                 [Measures].[CIF US]),
                 BDESC)))]]>
      </Formula>
    </CalculatedMember>
  </Cube>

  <Cube name="immigration">
    <Annotations>
      <Annotation name="source_name">Estadísticas de Migración — Departamento de Extranjería y Migración</Annotation>
      <Annotation name="source_link">http://www.extranjeria.gob.cl/estadisticas-migratorias/</Annotation>
      <Annotation name="topic">demography</Annotation>
    </Annotations>
    <Table name="fact_immigration_records" schema="demographics"/>

    <Dimension name="Date">
      <Hierarchy hasAll="true">
        <Level column="year" nameColumn="year" name="Year" uniqueMembers="true"/>
      </Hierarchy>
    </Dimension>

    <DimensionUsage foreignKey="comuna_datachile_id" name="Geography" source="Geography"/>
    <DimensionUsage caption="Origin Country" foreignKey="country_code" name="Origin Country" source="Country"/>
    <DimensionUsage foreignKey="sex_id" name="Sex" source="Sex"/>

    <Dimension foreignKey="studies_id" name="Education">
      <Annotations>
        <Annotation name="es_element_caption">Educación</Annotation>
      </Annotations>

      <Hierarchy hasAll="true">
        <InlineTable alias="education">
          <ColumnDefs>
            <ColumnDef name="id" type="Numeric"/>
            <ColumnDef name="description" type="String"/>
            <ColumnDef name="es_description" type="String"/>
          </ColumnDefs>
          <Rows>
            <Row>
              <Value column="id">0</Value>
              <Value column="description">No data</Value>
              <Value column="es_description">No informa</Value>
            </Row>
            <Row>
              <Value column="id">7</Value>
              <Value column="description">None</Value>
              <Value column="es_description">Ninguno</Value>
            </Row>
            <Row>
              <Value column="id">5</Value>
              <Value column="description">Higher Education</Value>
              <Value column="es_description">Educación Universitaria</Value>
            </Row>
            <Row>
              <Value column="id">2</Value>
              <Value column="description">High School</Value>
              <Value column="es_description">Educación Media</Value>
            </Row>
            <Row>
              <Value column="id">1</Value>
              <Value column="description">Primary School</Value>
              <Value column="es_description">Educación Básica</Value>
            </Row>
            <Row>
              <Value column="id">4</Value>
              <Value column="description">Technical Education</Value>
              <Value column="es_description">Educación Técnica</Value>
            </Row>
            <Row>
              <Value column="id">3</Value>
              <Value column="description">Some Primary School</Value>
              <Value column="es_description">Educación Pre-Básica</Value>
            </Row>
            <Row>
              <Value column="id">6</Value>
              <Value column="description">None</Value>
              <Value column="es_description">Ninguno</Value>
            </Row>
          </Rows>
        </InlineTable>
        <Level column="id" name="Education" nameColumn="description" uniqueMembers="true">
          <Annotations>
            <Annotation name="es_caption">Description ES</Annotation>
            <Annotation name="es_element_caption">Nivel Educativo</Annotation>
          </Annotations>
          <Property column="es_description" name="Description ES"/>
        </Level>
      </Hierarchy>
    </Dimension>

    <Dimension foreignKey="activity_id" name="Activity">
      <Annotations>
        <Annotation name="es_element_caption">Actividad</Annotation>
      </Annotations>

      <Hierarchy hasAll="true">
        <InlineTable alias="activity">
          <ColumnDefs>
            <ColumnDef name="id" type="Numeric"/>
            <ColumnDef name="description" type="String"/>
            <ColumnDef name="es_description" type="String"/>
          </ColumnDefs>
          <Rows>
            <Row>
              <Value column="id">0</Value>
              <Value column="description">No data</Value>
              <Value column="es_description">No informa</Value>
            </Row>
            <Row>
              <Value column="id">2</Value>
              <Value column="description">Employee</Value>
              <Value column="es_description">Empleado</Value>
            </Row>
            <Row>
              <Value column="id">5</Value>
              <Value column="description">Student</Value>
              <Value column="es_description">Estudiante</Value>
            </Row>
            <Row>
              <Value column="id">1</Value>
              <Value column="description">Housewife</Value>
              <Value column="es_description">Dueña de Casa</Value>
            </Row>
            <Row>
              <Value column="id">6</Value>
              <Value column="description">Unemployed</Value>
              <Value column="es_description">Inactivo</Value>
            </Row>
            <Row>
              <Value column="id">3</Value>
              <Value column="description">Maid</Value>
              <Value column="es_description">Empleado Doméstico</Value>
            </Row>
            <Row>
              <Value column="id">8</Value>
              <Value column="description">No data</Value>
              <Value column="es_description">No Informa</Value>
            </Row>
            <Row>
              <Value column="id">10</Value>
              <Value column="description">Other activities</Value>
              <Value column="es_description">Otras Actividades</Value>
            </Row>
            <Row>
              <Value column="id">11</Value>
              <Value column="description">Religious</Value>
              <Value column="es_description">Religioso</Value>
            </Row>
            <Row>
              <Value column="id">14</Value>
              <Value column="description">Self-Employed</Value>
              <Value column="es_description">Trabajador por Cuenta Propia</Value>
            </Row>
            <Row>
              <Value column="id">13</Value>
              <Value column="description">No activity</Value>
              <Value column="es_description">Sin Actividad</Value>
            </Row>
            <Row>
              <Value column="id">9</Value>
              <Value column="description">Laborer</Value>
              <Value column="es_description">Obrero o Jornalero</Value>
            </Row>
            <Row>
              <Value column="id">12</Value>
              <Value column="description">Landlord</Value>
              <Value column="es_description">Rentista</Value>
            </Row>
            <Row>
              <Value column="id">15</Value>
              <Value column="description">Pilot</Value>
              <Value column="es_description">Tripulante</Value>
            </Row>
            <Row>
              <Value column="id">14</Value>
              <Value column="description">Businessperson</Value>
              <Value column="es_description">Empresario o Patrón</Value>
            </Row>
            <Row>
              <Value column="id">7</Value>
              <Value column="description">Retired</Value>
              <Value column="es_description">Jubilado o Pensionado</Value>
            </Row>
          </Rows>
        </InlineTable>
        <Level column="id" name="Activity" nameColumn="description" uniqueMembers="true">
          <Annotations>
            <Annotation name="es_caption">Description ES</Annotation>
            <Annotation name="es_element_caption">Actividad</Annotation>
          </Annotations>
          <Property column="es_description" name="Description ES"/>
        </Level>
      </Hierarchy>
    </Dimension>

    <Dimension foreignKey="visa_type_id" name="Visa Type">
      <Annotations>
        <Annotation name="es_element_caption">Tipo de Visa</Annotation>
      </Annotations>

      <Hierarchy hasAll="true">
      	<InlineTable alias="visa_type">
          <ColumnDefs>
            <ColumnDef name="id" type="Numeric"/>
            <ColumnDef name="description" type="String"/>
            <ColumnDef name="es_description" type="String"/>
          </ColumnDefs>
          <Rows>
            <Row>
              <Value column="id">0</Value>
              <Value column="description">No data</Value>
              <Value column="es_description">No informa</Value>
            </Row>
            <Row>
              <Value column="id">1</Value>
              <Value column="description">Student</Value>
              <Value column="es_description">Estudiante</Value>
            </Row>
            <Row>
              <Value column="id">2</Value>
              <Value column="description">Temporary</Value>
              <Value column="es_description">Temporaria</Value>
            </Row>
            <Row>
              <Value column="id">3</Value>
              <Value column="description">Subject to Contract</Value>
              <Value column="es_description">Sujeta A Contrato</Value>
            </Row>
            <Row>
              <Value column="id">4</Value>
              <Value column="description">No benefit</Value>
              <Value column="es_description">Sin Beneficio</Value>
            </Row>
            <Row>
              <Value column="id">5</Value>
              <Value column="description">Mercosur Temporary Stay Agreement</Value>
              <Value column="es_description">Temp. Acuerdo Residencia Mercosur</Value>
            </Row>
            <Row>
              <Value column="id">6</Value>
              <Value column="description">Permanent Stay</Value>
              <Value column="es_description">Permanencia Definitiva</Value>
            </Row>
            <Row>
              <Value column="id">7</Value>
              <Value column="description">Definitive Permanence By Grace</Value>
              <Value column="es_description">Permanencia Definitiva Por Gracia</Value>
            </Row>
            <Row>
              <Value column="id">0</Value>
              <Value column="description">No data</Value>
              <Value column="es_description">No informa</Value>
            </Row>
          </Rows>
        </InlineTable>
        <Level column="id" name="Visa Type" nameColumn="description" uniqueMembers="true">
          <Annotations>
            <Annotation name="es_caption">Description ES</Annotation>
          </Annotations>
          <Property column="es_description" name="Description ES"/>
        </Level>
      </Hierarchy>
    </Dimension>

    <Dimension name="Calculated Age Range">
      <Annotations>
        <Annotation name="es_element_caption">Rango etario</Annotation>
      </Annotations>

      <Hierarchy hasAll="true">

        <Level name="Age Range">
          <KeyExpression>
            <SQL>
              <![CDATA[            (case 
                       when age BETWEEN 0 AND 14 then '0-14'
                       when age BETWEEN 15 AND 19 then '15-19'
                       when age BETWEEN 20 AND 24 then '20-24'
                       when age BETWEEN 25 AND 29 then '25-29'
                       when age BETWEEN 30 AND 64 then '30-64'
                       when age >= 65 then '65-110'
                       end)
              ]]>
            </SQL>
          </KeyExpression>
          <NameExpression>
            <SQL>
              <![CDATA[(case 
                       when age BETWEEN 0 AND 14 then '0-14'
                       when age BETWEEN 15 AND 19 then '15-19'
                       when age BETWEEN 20 AND 24 then '20-24'
                       when age BETWEEN 25 AND 29 then '25-29'
                       when age BETWEEN 30 AND 64 then '30-64'
                       when age >= 65 then '65-110'
                       end)]]>
            </SQL>
          </NameExpression>
        </Level>
        
      </Hierarchy>
    </Dimension>

    <Measure aggregator="count" column="birth_date" name="Number of visas">
      <Annotations>
        <Annotation name="es_element_caption">Cantidad de visas entregadas</Annotation>
        <Annotation name="es_format">XXX</Annotation>
      </Annotations>
    </Measure>

    <Measure aggregator="avg" column="age" name="Average Age">
      <Annotations>
        <Annotation name="es_element_caption">Edad promedio según visas entregadas</Annotation>
        <Annotation name="es_format">XXX</Annotation>
      </Annotations>
    </Measure>
  </Cube>


  <Cube name="tax_data">
    <Annotations>
      <Annotation name="source_name">Servicio de Impuestos Internos</Annotation>
      <Annotation name="source_link">http://homer.sii.cl/</Annotation>
      <Annotation name="topic">economy</Annotation>
    </Annotations>

    <View alias="tax_data">
      <SQL>
	      <![CDATA[(SELECT * from economy.tax_data WHERE ciiu4_ori is not NULL and the_year <> 0 and the_year is not NULL and output > 0)]]>
      </SQL>
    </View>

    <!-- <DimensionUsage foreignKey="date_id" name="Date" source="Date"/> -->
    <Dimension name="Date">
      <Hierarchy hasAll="true">
        <Level column="the_year" nameColumn="the_year" name="Year" uniqueMembers="true"/>
      </Hierarchy>
    </Dimension>

    <DimensionUsage foreignKey="comuna_id" name="Tax Geography" source="Geography"/>
    <DimensionUsage foreignKey="ciiu4_ori" name="ISICrev4" source="ISICrev4"/>

    <Measure aggregator="sum" column="output" name="Output"/>
    <Measure aggregator="sum" column="labour" name="Labour"/>
    <Measure aggregator="sum" column="labour_cost" name="Labour Cost"/>
    <Measure aggregator="sum" column="investment" name="Investment"/>
    <Measure aggregator="sum" column="intermediates" name="Intermediates"/>

    <CalculatedMember dimension="Measures" name="Value Added">
      <Formula>
        <![CDATA[[Measures].[Output] - [Measures].[Intermediates]]]>
      </Formula>
    </CalculatedMember>

    <CalculatedMember dimension="Measures" name="Production per worker">
      <Formula>
        <![CDATA[Iif([Measures].[Labour] > 0, [Measures].[Output]/[Measures].[Labour], Null)]]>
      </Formula>
    </CalculatedMember>

    <CalculatedMember dimension="Measures" name="Value added per worker">
      <Formula>
        <![CDATA[Iif([Measures].[Labour] > 0, [Measures].[Value Added] / [Measures].[Labour], Null)]]>
      </Formula>
    </CalculatedMember>

    <CalculatedMember dimension="Measures" name="Output for year (sum_c_p_xcp)" visible="false"> <!-- all geos, all industries, current year -->
      <Formula>
        <![CDATA[(Measures.[Output], [Date].[Year].CurrentMember, [ISICrev4].[ISICrev4].[All ISICrev4s], [Tax Geography].[Geography].[All Geographys])]]>
      </Formula>
    </CalculatedMember>

    <CalculatedMember dimension="Measures" name="Output for Geography and year (sum_p_xcp)" visible="false"> <!-- all industries, current geo, current year -->
      <Formula>
        <![CDATA[(Measures.[Output], [Date].[Year].CurrentMember, [ISICrev4].[ISICrev4].[All ISICrev4s], [Tax Geography].[Geography].CurrentMember)]]>
      </Formula>
    </CalculatedMember>

    <CalculatedMember dimension="Measures" name="Output for Industry and year (sum_c_xcp)" visible="false"> <!-- all geos, current industry, current year -->
      <Formula>
        <![CDATA[(Measures.[Output], [Date].[Year].CurrentMember, [ISICrev4].[ISICrev4].CurrentMember, [Tax Geography].[Geography].[All Geographys])]]>
      </Formula>
    </CalculatedMember>
    
    <CalculatedMember dimension="Measures" name="Output RCA">
      <Formula><![CDATA[(Measures.[Output] / Measures.[Output for Industry and year (sum_c_xcp)]) / (Measures.[Output for Geography and year (sum_p_xcp)] / Measures.[Output for year (sum_c_p_xcp)]) ]]></Formula>
    </CalculatedMember>
  </Cube>

  <Cube name="rd_survey">
    <Annotations>
      <Annotation name="source_name">Ministerio de Economía, Fomento y Turismo</Annotation>
      <Annotation name="source_link">http://www.economia.gob.cl/estudios-y-encuestas/encuestas/encuestas-de-innovacion-e-id/encuestas-de-innovacion</Annotation>
      <Annotation name="topic">economy</Annotation>
    </Annotations>
    <Table name="fact_rd_survey" schema="public"/>

    <DimensionUsage foreignKey="date_id" name="Date" source="Date"/>
    <DimensionUsage caption="Headquarters Country" foreignKey="headquarters_country_id" name="Headquarters Country" source="Country"/>
    <DimensionUsage foreignKey="CIIU_level1" name="ISICrev4" source="ISICrev4 Level 1"/>

    <Dimension foreignKey="org_juridica" name="Business Type">
      <Annotations>
        <Annotation name="es_element_caption">Tipo de negocio</Annotation>
      </Annotations>

      <Hierarchy hasAll="true">
        <InlineTable alias="ownership_type">
          <ColumnDefs>
            <ColumnDef name="id" type="Numeric"/>
            <ColumnDef name="description" type="String"/>
            <ColumnDef name="es_description" type="String"/>
          </ColumnDefs>
          <Rows>
            <Row>
              <Value column="id">1</Value>
              <Value column="description">Private Domestic</Value>
              <Value column="es_description">Privada Nacional</Value>
            </Row>
            <Row>
              <Value column="id">2</Value>
              <Value column="description">Private Foreign</Value>
              <Value column="es_description">Privada Extranjera</Value>
            </Row>
            <Row>
              <Value column="id">3</Value>
              <Value column="description">Mixed</Value>
              <Value column="es_description">Mixta</Value>
            </Row>
            <Row>
              <Value column="id">4</Value>
              <Value column="description">State-owned</Value>
              <Value column="es_description">Estatal</Value>
            </Row>
            <Row>
              <Value column="id">5</Value>
              <Value column="description">Open Stock Coporation</Value>
              <Value column="es_description">Sociedad Anónima Abierta</Value>
            </Row>
            <Row>
              <Value column="id">6</Value>
              <Value column="description">Cooperative</Value>
              <Value column="es_description">Cooperativa</Value>
            </Row>
            <Row>
              <Value column="id">7</Value>
              <Value column="description">State-owned</Value>
              <Value column="es_description">Pública</Value>
            </Row>
            <Row>
              <Value column="id">8</Value>
              <Value column="description">Joint-stock company</Value>
              <Value column="es_description">Sociedad por Acciones</Value>
            </Row>
            <Row>
              <Value column="id">9</Value>
              <Value column="description">Single-owner limited liability company</Value>
              <Value column="es_description">EIRL</Value>
            </Row>
            <Row>
              <Value column="id">10</Value>
              <Value column="description">Other</Value>
              <Value column="es_description">Otro</Value>
            </Row>
          </Rows>
        </InlineTable>
        <Level column="id" name="Business Type" nameColumn="description" uniqueMembers="true">
          <Annotations>
            <Annotation name="es_caption">Description ES</Annotation>
          </Annotations>
          <Property column="es_description" name="Description ES"/>
        </Level>
      </Hierarchy>
    </Dimension>

    <Dimension foreignKey="forma_propiedad" name="Ownership Type">
      <Annotations>
        <Annotation name="es_element_caption">Tipo de propiedad</Annotation>
      </Annotations>

      <Hierarchy hasAll="true">
        <InlineTable alias="ownership_type">
          <ColumnDefs>
            <ColumnDef name="id" type="Numeric"/>
            <ColumnDef name="description" type="String"/>
            <ColumnDef name="es_description" type="String"/>
          </ColumnDefs>
          <Rows>
            <Row>
              <Value column="id">1</Value>
              <Value column="description">Private Domestic</Value>
              <Value column="es_description">Privada Nacional</Value>
            </Row>
            <Row>
              <Value column="id">2</Value>
              <Value column="description">Private Foreign</Value>
              <Value column="es_description">Privada Extranjera</Value>
            </Row>
            <Row>
              <Value column="id">3</Value>
              <Value column="description">Mixed</Value>
              <Value column="es_description">Mixta</Value>
            </Row>
            <Row>
              <Value column="id">4</Value>
              <Value column="description">State-owned</Value>
              <Value column="es_description">Estatal</Value>
            </Row>
          </Rows>
        </InlineTable>
        <Level column="id" name="Ownership Type" nameColumn="description" uniqueMembers="true">
          <Annotations>
            <Annotation name="es_caption">Description ES</Annotation>
          </Annotations>
          <Property column="es_description" name="Description ES"/>
        </Level>
      </Hierarchy>
    </Dimension>

    <Measure aggregator="sum" column="ventas" name="sales" visible="true"/>
    <Measure aggregator="sum" column="exportaciones" name="exports" visible="true"/>
    <Measure aggregator="sum" column="gasto_total" name="Total Spending" visible="true"/>

    <!-- expenditure by region -->
    <Measure aggregator="sum" column="gasto_XV_ARICA" name="gasto_region_15" visible="true"/>
    <Measure aggregator="sum" column="gasto_I_TARAPACA" name="gasto_region_1" visible="true"/>
    <Measure aggregator="sum" column="gasto_II_ANTOFAGASTA" name="gasto_region_2" visible="true"/>
    <Measure aggregator="sum" column="gasto_III_ATACAMA" name="gasto_region_3" visible="true"/>
    <Measure aggregator="sum" column="gasto_IV_COQUIMBO" name="gasto_region_4" visible="true"/>
    <Measure aggregator="sum" column="gasto_V_VALPARAISO" name="gasto_region_5" visible="true"/>
    <Measure aggregator="sum" column="gasto_VI_OHIGGINS" name="gasto_region_6" visible="true"/>
    <Measure aggregator="sum" column="gasto_VII_MAULE" name="gasto_region_7" visible="true"/>
    <Measure aggregator="sum" column="gasto_VIII_BIOBIO" name="gasto_region_8" visible="true"/>
    <Measure aggregator="sum" column="gasto_IX_ARAUCANIA" name="gasto_region_9" visible="true"/>
    <Measure aggregator="sum" column="gasto_XIV_RIOS" name="gasto_region_14" visible="true"/>
    <Measure aggregator="sum" column="gasto_X_LAGOS" name="gasto_region_10" visible="true"/>
    <Measure aggregator="sum" column="gasto_XI_AYSEN" name="gasto_region_11" visible="true"/>
    <Measure aggregator="sum" column="gasto_XII_MAGALLANES" name="gasto_region_12" visible="true"/>
    <Measure aggregator="sum" column="gasto_XIII_METROPOLITANA" name="gasto_region_13" visible="true"/>

    <!-- staff by region -->
    <Measure aggregator="sum" column="personal_72" name="staff_region_15" visible="true"/>
    <Measure aggregator="sum" column="personal_73" name="staff_region_1" visible="true"/>
    <Measure aggregator="sum" column="personal_74" name="staff_region_2" visible="true"/>
    <Measure aggregator="sum" column="personal_75" name="staff_region_3" visible="true"/>
    <Measure aggregator="sum" column="personal_76" name="staff_region_4" visible="true"/>
    <Measure aggregator="sum" column="personal_77" name="staff_region_5" visible="true"/>
    <Measure aggregator="sum" column="personal_78" name="staff_region_6" visible="true"/>
    <Measure aggregator="sum" column="personal_79" name="staff_region_7" visible="true"/>
    <Measure aggregator="sum" column="personal_80" name="staff_region_8" visible="true"/>
    <Measure aggregator="sum" column="personal_81" name="staff_region_9" visible="true"/>
    <Measure aggregator="sum" column="personal_82" name="staff_region_14" visible="true"/>
    <Measure aggregator="sum" column="personal_83" name="staff_region_10" visible="true"/>
    <Measure aggregator="sum" column="personal_84" name="staff_region_11" visible="true"/>
    <Measure aggregator="sum" column="personal_85" name="staff_region_12" visible="true"/>
    <Measure aggregator="sum" column="personal_86" name="staff_region_13" visible="true"/>
  </Cube>

  <!-- NESI -->
  <Cube name="nesi_income">
    <Annotations>
      <Annotation name="source_name">Encuesta Suplementaria de Ingresos — INE</Annotation>
      <Annotation name="source_link">http://www.ine.cl/estadisticas/ingresos-y-gastos/esi</Annotation>
      <Annotation name="topic">economy</Annotation>
    </Annotations>
    <!-- Table name="fact_income_nesi" schema="economy" / -->
    <View alias="nesi_view">
      <SQL>
	      <![CDATA[(SELECT *, (income * weight) AS weighted_income from economy.fact_income_nesi)]]>
      </SQL>
    </View>

    <DimensionUsage foreignKey="date_id" name="Date" source="Date"/>
    <DimensionUsage foreignKey="comuna_datachile_id" name="Geography" source="Geography"/>
    <DimensionUsage foreignKey="sex_id" name="Sex" source="Sex"/>
    <DimensionUsage foreignKey="age_range_id" name="Age Range" source="Age Range"/>
    <DimensionUsage foreignKey="isco_id" name="ISCO" source="ISCO"/>
    <DimensionUsage foreignKey="icse_id" name="ICSE" source="ICSE"/>
    <DimensionUsage foreignKey="isced_id" name="ISCED" source="ISCED"/>

    <Dimension foreignKey="occupation_id" name="Occupation Length">
      <Hierarchy hasAll="true">
        <InlineTable alias="occupation">
          <ColumnDefs>
          	<ColumnDef name="id" type="Numeric"/>
          	<ColumnDef name="description" type="String"/>
          	<ColumnDef name="es_description" type="String"/>
          </ColumnDefs>
          <Rows>
          	<Row>
          	  <Value column="id">0</Value>
          	  <Value column="description">Occupied for less than 1 month at current position</Value>
          	  <Value column="es_description">Ocupados con menos de 1 mes en el empleo actual</Value>
          	</Row>
          	<Row>
          	  <Value column="id">1</Value>
          	  <Value column="description">Occupied for more than 1 month at current position</Value>
          	  <Value column="es_description">Ocupados con más de 1 mes en el empleo actual</Value>
          	</Row>
          </Rows>
        </InlineTable>
        <Level column="id" name="Occupation Length" nameColumn="description" uniqueMembers="true">
          <Annotations>
            <Annotation name="es_caption">Description ES</Annotation>
          </Annotations>
          <Property column="es_description" name="Description ES"/>
        </Level>
      </Hierarchy>
    </Dimension>

    <Dimension foreignKey="journey_id" name="Workday">
      <Hierarchy hasAll="true">
        <InlineTable alias="workdays">
          <ColumnDefs>
            <ColumnDef name="id" type="Numeric"/>
            <ColumnDef name="description" type="String"/>
            <ColumnDef name="es_description" type="String"/>
          </ColumnDefs>
          <Rows>
            <Row>
              <Value column="id">0</Value>
              <Value column="description">No data</Value>
              <Value column="es_description">No informa</Value>
            </Row>
            <Row>
              <Value column="id">1</Value>
              <Value column="description">Full-time</Value>
              <Value column="es_description">Completa</Value>
            </Row>
	          <Row>
              <Value column="id">2</Value>
              <Value column="description">Part-time</Value>
              <Value column="es_description">Parcial</Value>
            </Row>
          </Rows>
        </InlineTable>
        <Level column="id" name="Workday" nameColumn="description" uniqueMembers="true">
          <Annotations>
            <Annotation name="es_caption">Description ES</Annotation>
          </Annotations>
          <Property column="es_description" name="Description ES"/>
        </Level>
      </Hierarchy>
    </Dimension>

    <Dimension name="Income Range">
      <Hierarchy hasAll="true">

        <Level name="Income Range">
          <KeyExpression>
            <SQL>
              <![CDATA[(case 
                       when income BETWEEN 0 AND 241000 then '01'
                       when income BETWEEN 241001 AND 482000 then '02'
                       when income BETWEEN 482001 AND 723000 then '03'
                       when income BETWEEN 723001 AND 964000 then '04'
                       when income BETWEEN 964001 AND 1205000 then '05'
                       when income BETWEEN 1205001 AND 1446000 then '06'
                       when income BETWEEN 1446001 AND 1687000 then '07'
                       when income BETWEEN 1687001 AND 1928000 then '08'
                       when income BETWEEN 1928001 AND 2169000 then '09'
                       when income >= 2169001 then '10'
                       end)]]>
            </SQL>
          </KeyExpression>
          <NameExpression>
            <SQL>
              <![CDATA[(case 
                       when income BETWEEN 0 AND 241000 then '0-241000'
                       when income BETWEEN 241001 AND 482000 then '241001-482000'
                       when income BETWEEN 482001 AND 723000 then '482001-723000'
                       when income BETWEEN 723001 AND 964000 then '723001-964000'
                       when income BETWEEN 964001 AND 1205000 then '964001-1205000'
                       when income BETWEEN 1205001 AND 1446000 then '1205001-1446000'
                       when income BETWEEN 1446001 AND 1687000 then '1446001-1687000'
                       when income BETWEEN 1687001 AND 1928000 then '1687001-1928000'
                       when income BETWEEN 1928001 AND 2169000 then '1928001-2169000'
                       when income >= 2169001 then '+2169001'
                       end)]]>
            </SQL>
          </NameExpression>
        </Level>
        
      </Hierarchy>
    </Dimension>

    <Measure aggregator="sum" column="income" name="Income" visible="true"/>
    <Measure aggregator="sum" column="weight" name="Expansion Factor" visible="true"/>
    <Measure aggregator="sum" column="weighted_income" name="Income weighted" visible="false"/>
    <Measure aggregator="None" dataType="Numeric" name="Median Income" visible="true">
      <MeasureExpression>
        <SQL dialect="postgres">PERCENTILE_DISC(0.5) WITHIN GROUP (ORDER BY income ASC)</SQL>
      </MeasureExpression>
    </Measure>
    <Measure aggregator="sum" column="weighted_income" name="Weighted Income" visible="true"/>

    <CalculatedMember dimension="Measures" name="Weighted Median Income Rank" visible="true">
      <Formula>
        <![CDATA[Rank([Geography].CurrentMember,
                 Order(Geography.CurrentMember.Level.Members,
                 Measures.[Median Income], BDESC))
        ]]>
      </Formula>
    </CalculatedMember>

    <CalculatedMember dimension="Measures" name="Weighted Median Income Decile" visible="true">
      <Formula>
        <![CDATA[((count(Geography.CurrentMember.Level.Members)-Measures.[Weighted Median Income Rank]+1) * 10) / count(Geography.CurrentMember.Level.Members)]]>
      </Formula>
    </CalculatedMember>

    <CalculatedMember dimension="Measures" name="Weighted Median Income Total" visible="true">
      <Formula>
        <![CDATA[count(Geography.CurrentMember.Level.Members)]]>
      </Formula>
    </CalculatedMember>
  </Cube>
  <!-- / NESI -->

  <Cube name="internet_access">
    <Annotations>
      <Annotation name="source_name">Encuesta de Acceso, Usos y Usuarios de Internet — INE</Annotation>
      <Annotation name="source_link">http://anda.ine.cl/index.php/catalog/9222</Annotation>
      <Annotation name="topic">environment</Annotation>
    </Annotations>
    <Table name="fact_internet_access_survey" schema="environment"/>

    <DimensionUsage foreignKey="region_id" source="Geography Region" name="Geography" />
    <DimensionUsage foreignKey="zone_id" name="Zone" source="Zone"/>

    <DimensionUsage caption="Internet Plan" foreignKey="internet_plan_id" name="Internet Plan" source="Binary Survey Response"/>
    <DimensionUsage caption="Home Access" foreignKey="home_access_id" name="Home Access" source="Binary Survey Response"/>
    <DimensionUsage caption="Desktop Access" foreignKey="desktop_access_id" name="Desktop Access" source="Binary Survey Response"/>
    <DimensionUsage caption="Laptop Access" foreignKey="laptop_access_id" name="Laptop Access" source="Binary Survey Response"/>
    <DimensionUsage caption="Tablet Access" foreignKey="tablet_access_id" name="Tablet Access" source="Binary Survey Response"/>
    <DimensionUsage caption="Cellphone Access" foreignKey="cellphone_access_id" name="Cellphone Access" source="Binary Survey Response"/>
    <DimensionUsage caption="Games or Consoles Access" foreignKey="games_consoles_access_id" name="Games or Consoles Access" source="Binary Survey Response"/>
    <DimensionUsage caption="TV Access" foreignKey="tv_access_id" name="TV Access" source="Binary Survey Response"/>

    <Measure aggregator="count" column="region_id" name="Number of records" visible="true"/>
    <Measure aggregator="sum" column="weights" name="Expansion factor" visible="true"/>
  </Cube>

  <!-- NENE QUARTER PALA-->
  <Cube name="nene_quarter">
    <Annotations>
      <Annotation name="source_name">Encuesta Nacional de Empleo — INE</Annotation>
      <Annotation name="source_link">http://www.ine.cl/estadisticas/laborales/ene</Annotation>
      <Annotation name="topic">economy</Annotation>
    </Annotations>

    <Table name="fact_occupational_status_nene_mobile_quarters_new" schema="economy" />

    <Dimension name="Date">
      <Hierarchy hasAll="true">
        <Level column="year" nameColumn="year" name="Year" uniqueMembers="true"/>
        <Level column="moving_quarter" nameColumn="moving_quarter" name="Moving Quarter" uniqueMembers="true"/>
      </Hierarchy>
    </Dimension>

    <Dimension foreignKey="isic_cl_caenes_id" name="ISIC CAENES">
      <Hierarchy hasAll="true">
        <InlineTable alias="isic_cl_caenes">
          <ColumnDefs>
            <ColumnDef name="id" type="Numeric" />
            <ColumnDef name="description" type="String" />
            <ColumnDef name="es_description" type="String" />
          </ColumnDefs>
          <Rows>
            <Row>
              <Value column="id">0</Value>
              <Value column="description">No data</Value>
              <Value column="es_description">No informa</Value>
            </Row>
            <Row>
              <Value column="id">1</Value>
              <Value column="description">Agricultura, ganadería, silvicultura y pesca</Value>
              <Value column="es_description">Agricultura, ganadería, silvicultura y pesca</Value>
            </Row>
            <Row>
              <Value column="id">2</Value>
              <Value column="description">Explotación de minas y canteras</Value>
              <Value column="es_description">Explotación de minas y canteras</Value>
            </Row>
            <Row>
              <Value column="id">3</Value>
              <Value column="description">Industrias manufactureras</Value>
              <Value column="es_description">Industrias manufactureras</Value>
            </Row>
            <Row>
              <Value column="id">4</Value>
              <Value column="description">Suministro de electricidad, gas, vapor y aire acondicionado</Value>
              <Value column="es_description">Suministro de electricidad, gas, vapor y aire acondicionado</Value>
            </Row>
            <Row>
              <Value column="id">5</Value>
              <Value column="description">Suministro de agua; evacuación de aguas residuales, gestión de desechos y descontaminación</Value>
              <Value column="es_description">Suministro de agua; evacuación de aguas residuales, gestión de desechos y descontaminación</Value>
            </Row>
            <Row>
              <Value column="id">6</Value>
              <Value column="description">Construcción</Value>
              <Value column="es_description">Construcción</Value>
            </Row>
            <Row>
              <Value column="id">7</Value>
              <Value column="description">Comercio al por mayor y al por menor; reparación de vehículos automotores y motocicletas</Value>
              <Value column="es_description">Comercio al por mayor y al por menor; reparación de vehículos automotores y motocicletas</Value>
            </Row>
            <Row>
              <Value column="id">8</Value>
              <Value column="description">Transporte y almacenamiento</Value>
              <Value column="es_description">Transporte y almacenamiento</Value>
            </Row>
            <Row>
              <Value column="id">9</Value>
              <Value column="description">Actividades de alojamiento y de servicio de comidas</Value>
              <Value column="es_description">Actividades de alojamiento y de servicio de comidas</Value>
            </Row>
            <Row>
              <Value column="id">10</Value>
              <Value column="description">Información y comunicaciones</Value>
              <Value column="es_description">Información y comunicaciones</Value>
            </Row>
            <Row>
              <Value column="id">11</Value>
              <Value column="description">Actividades financieras y de seguros</Value>
              <Value column="es_description">Actividades financieras y de seguros</Value>
            </Row>
            <Row>
              <Value column="id">12</Value>
              <Value column="description">Actividades inmobiliarias</Value>
              <Value column="es_description">Actividades inmobiliarias</Value>
            </Row>
            <Row>
              <Value column="id">13</Value>
              <Value column="description">Actividades profesionales, científicas y técnicas</Value>
              <Value column="es_description">Actividades profesionales, científicas y técnicas</Value>
            </Row>
            <Row>
              <Value column="id">14</Value>
              <Value column="description">Actividades de servicios administrativos y de apoyo</Value>
              <Value column="es_description">Actividades de servicios administrativos y de apoyo</Value>
            </Row>
            <Row>
              <Value column="id">15</Value>
              <Value column="description">Administración pública y defensa; planes de seguridad social de afiliación obligatoria</Value>
              <Value column="es_description">Administración pública y defensa; planes de seguridad social de afiliación obligatoria</Value>
            </Row>
            <Row>
              <Value column="id">16</Value>
              <Value column="description">Enseñanza</Value>
              <Value column="es_description">Enseñanza</Value>
            </Row>
            <Row>
              <Value column="id">17</Value>
              <Value column="description">Actividades de atención de la salud humana y de asistencia social</Value>
              <Value column="es_description">Actividades de atención de la salud humana y de asistencia social</Value>
            </Row>
            <Row>
              <Value column="id">18</Value>
              <Value column="description">Actividades artísticas, de entretenimiento y recreativas</Value>
              <Value column="es_description">Actividades artísticas, de entretenimiento y recreativas</Value>
            </Row>
            <Row>
              <Value column="id">19</Value>
              <Value column="description">Otras actividades de servicios</Value>
              <Value column="es_description">Otras actividades de servicios</Value>
            </Row>
            <Row>
              <Value column="id">20</Value>
              <Value column="description">Actividades de los hogares como empleadores; actividades no diferenciadas de los hogares como productores de bienes y se</Value>
              <Value column="es_description">Actividades de los hogares como empleadores; actividades no diferenciadas de los hogares como productores de bienes y se</Value>
            </Row>
            <Row>
              <Value column="id">21</Value>
              <Value column="description">Actividades de organizaciones y órganos extraterritoriales</Value>
              <Value column="es_description">Actividades de organizaciones y órganos extraterritoriales</Value>
            </Row>
          </Rows>
        </InlineTable>
        <Level column="id" name="ISIC CAENES" nameColumn="description" uniqueMembers="true">
          <Annotations>
            <Annotation name="es_caption">Description ES</Annotation>
          </Annotations>
          <Property column="es_description" name="Description ES" />
        </Level>
      </Hierarchy>
    </Dimension>

    <Dimension foreignKey="occupied_id" name="Occupational Situation">
      <Hierarchy hasAll="true">
        <InlineTable alias="occupational_situation">
          <ColumnDefs>
            <ColumnDef name="id" type="Numeric"/>
            <ColumnDef name="description" type="String"/>
            <ColumnDef name="es_description" type="String"/>
          </ColumnDefs>
          <Rows>
            <Row>
              <Value column="id">0</Value>
              <Value column="description">No data</Value>
              <Value column="es_description">No informa</Value>
            </Row>
            <Row>
              <Value column="id">1</Value>
              <Value column="description">Employed</Value>
              <Value column="es_description">Ocupado</Value>
            </Row>
            <Row>
              <Value column="id">2</Value>
              <Value column="description">Unemployed</Value>
              <Value column="es_description">Desocupado</Value>
            </Row>
            <Row>
              <Value column="id">3</Value>
              <Value column="description">Inactive</Value>
              <Value column="es_description">Inactivo</Value>
            </Row>
          </Rows>
        </InlineTable>
        <Level column="id" name="Occupational Situation" nameColumn="description" uniqueMembers="true">
          <Annotations>
            <Annotation name="es_caption">Description ES</Annotation>
          </Annotations>
          <Property column="es_description" name="Description ES"/>
        </Level>
      </Hierarchy>
    </Dimension>

    <Dimension foreignKey="general_economic_condition" name="General Economic Condition">
      <Hierarchy hasAll="true">
        <InlineTable alias="general_economic_condition">
          <ColumnDefs>
            <ColumnDef name="id" type="Numeric"/>
            <ColumnDef name="description" type="String"/>
            <ColumnDef name="es_description" type="String"/>
          </ColumnDefs>
          <Rows>
            <Row>
              <Value column="id">0</Value>
              <Value column="description">Under 15 years old</Value>
              <Value column="es_description">Menor de 15 años</Value>
            </Row>
            <Row>
              <Value column="id">1</Value>
              <Value column="description">Traditional employee</Value>
              <Value column="es_description">Ocupado tradicional</Value>
            </Row>
            <Row>
              <Value column="id">2</Value>
              <Value column="description">Non-traditional employee</Value>
              <Value column="es_description">Ocupado no tradicional</Value>
            </Row>
            <Row>
              <Value column="id">3</Value>
              <Value column="description">Absent employee</Value>
              <Value column="es_description">Ocupado ausente</Value>
            </Row>
            <Row>
              <Value column="id">4</Value>
              <Value column="description">Unemployed</Value>
              <Value column="es_description">Cesante</Value>
            </Row>
            <Row>
              <Value column="id">5</Value>
              <Value column="description">Looking for his/her first job</Value>
              <Value column="es_description">Busca trabajo por primera vez</Value>
            </Row>
            <Row>
              <Value column="id">6</Value>
              <Value column="description">Starting to work</Value>
              <Value column="es_description">Iniciador</Value>
            </Row>
            <Row>
              <Value column="id">7</Value>
              <Value column="description">Inactives that did search for a job</Value>
              <Value column="es_description">Inactivos que buscaron trabajo</Value>
            </Row>
            <Row>
              <Value column="id">8</Value>
              <Value column="description">Inactives that were available to work</Value>
              <Value column="es_description">Inactivos que estuvieron disponibles para trabajar</Value>
            </Row>
            <Row>
              <Value column="id">9</Value>
              <Value column="description">Inactives that did not search or were not available to work</Value>
              <Value column="es_description">Inactivos que no buscaron trabajo ni estuvieron disponibles</Value>
            </Row>
          </Rows>
        </InlineTable>
        <Level column="id" name="General Economic Condition" nameColumn="description" uniqueMembers="true">
          <Annotations>
            <Annotation name="es_caption">Description ES</Annotation>
          </Annotations>
          <Property column="es_description" name="Description ES"/>
        </Level>
      </Hierarchy>
    </Dimension>


    <DimensionUsage foreignKey="region_id" source="Geography Region" name="Geography" />
    <DimensionUsage foreignKey="sex_id" name="Sex" source="Sex"/>
    <DimensionUsage foreignKey="age_range_id" name="Age Range" source="Age Range"/>
    <DimensionUsage foreignKey="isced_id" name="ISCED" source="ISCED"/>
    <DimensionUsage foreignKey="icse_id" name="ICSE" source="ICSE"/>
    <DimensionUsage foreignKey="isco_id" name="ISCO" source="ISCO"/>


    <Measure aggregator="count" column="year" name="Number of records" visible="true"/>
    <Measure aggregator="sum" column="weights" name="Internal Expansion factor" visible="false"/>

    <CalculatedMember dimension="Measures" name="Expansion factor" visible="true">
      <Formula>
        <![CDATA[IIF(Date.CurrentMember.Level.Name = 'Year',
                 (
                   [Measures].[Internal Expansion factor],
                   LastNonEmpty(Descendants([Date].CurrentMember, Date.Date.[Moving Quarter]),
                               [Measures].[Internal Expansion Factor])
                 ),
                 [Measures].[Internal Expansion factor])]]>
      </Formula>
    </CalculatedMember>


    <CalculatedMember dimension="Measures" name="Number of records Decile" visible="true">
      <Formula>
        <![CDATA[IIF(Date.CurrentMember.Level is Date.Date.Year,
                 (
                 [Measures].[Number of records],
                 LastNonEmpty(Descendants([Date].CurrentMember, Date.Date.[Moving Quarter]),
                 [Measures].[Number of records])
                 ),
                 [Measures].[Number of records])]]>
      </Formula>
    </CalculatedMember>

    <CalculatedMember dimension="Measures" name="Expansion Factor Decile" visible="true">
      <Formula>
        <![CDATA[IIF(Date.CurrentMember.Level.Name = 'Year',
                 (
                   [Measures].[Expansion factor],
                   LastNonEmpty(Descendants([Date].CurrentMember, Date.Date.[Moving Quarter]),
                               [Measures].[Expansion Factor])
                 ),
                 [Measures].[Expansion factor])]]>
      </Formula>
    </CalculatedMember>
  </Cube>
  <!-- / NENE -->


  <!-- PSU -->

  <Cube name="psu">
    <Annotations>
      <Annotation name="source_name">Prueba de Selección Universitaria (PSU) - DEMRE</Annotation>
      <Annotation name="source_link">http://demre.cl/</Annotation>
      <Annotation name="topic">education</Annotation>
    </Annotations>
    
    <View alias="fact_psu">
      <SQL dialect="generic"><![CDATA[(SELECT
      *, ((language_test + math_test) / 2) as avg_individual from education.fact_psu
      )]]></SQL>
    </View>

    <DimensionUsage foreignKey="date_id" name="Date" source="Date"/>
    <DimensionUsage foreignKey="comuna_datachile_id" name="Geography" source="Geography"/>
    <DimensionUsage foreignKey="sex_id" name="Sex" source="Sex"/>

    <Dimension name="Calculated PSU Bucket">
      <Hierarchy hasAll="true">

        <Level name="Bucket">
          <KeyExpression>
            <SQL>
              <![CDATA[(case 
                       when avg_individual BETWEEN 150 AND 199 then '150-199'
                       when avg_individual BETWEEN 200 AND 249 then '200-249'
                       when avg_individual BETWEEN 250 AND 299 then '250-299'
                       when avg_individual BETWEEN 300 AND 349 then '300-349'
                       when avg_individual BETWEEN 350 AND 399 then '350-399'
                       when avg_individual BETWEEN 400 AND 449 then '400-449'
                       when avg_individual BETWEEN 450 AND 499 then '450-499'
                       when avg_individual BETWEEN 500 AND 549 then '500-549'
                       when avg_individual BETWEEN 550 AND 599 then '550-599'
                       when avg_individual BETWEEN 600 AND 649 then '600-649'
                       when avg_individual BETWEEN 650 AND 699 then '650-699'
                       when avg_individual BETWEEN 700 AND 749 then '700-749'
                       when avg_individual BETWEEN 750 AND 799 then '750-799'
                       when avg_individual >= 800 then '800'
                      end)
              ]]>
            </SQL>
          </KeyExpression>
          <NameExpression>
            <SQL>
              <![CDATA[(case 
                       when avg_individual BETWEEN 150 AND 199 then '150-199 pts'
                       when avg_individual BETWEEN 200 AND 249 then '200-249 pts'
                       when avg_individual BETWEEN 250 AND 299 then '250-299 pts'
                       when avg_individual BETWEEN 300 AND 349 then '300-349 pts'
                       when avg_individual BETWEEN 350 AND 399 then '350-399 pts'
                       when avg_individual BETWEEN 400 AND 449 then '400-449 pts'
                       when avg_individual BETWEEN 450 AND 499 then '450-499 pts'
                       when avg_individual BETWEEN 500 AND 549 then '500-549 pts'
                       when avg_individual BETWEEN 550 AND 599 then '550-599 pts'
                       when avg_individual BETWEEN 600 AND 649 then '600-649 pts'
                       when avg_individual BETWEEN 650 AND 699 then '650-699 pts'
                       when avg_individual BETWEEN 700 AND 749 then '700-749 pts'
                       when avg_individual BETWEEN 750 AND 799 then '750-799 pts'
                       when avg_individual >= 800 then '+800 pts'
                      end)
              ]]>
            </SQL>
          </NameExpression>
        </Level>
        
      </Hierarchy>
    </Dimension>

    <Measure aggregator="count" name="Number of records" visible="true">
      <MeasureExpression>
        <SQL>((language_test + math_test) / 2)</SQL>
      </MeasureExpression>
    </Measure>

    <Measure aggregator="avg" column="language_test" name="Avg language test" visible="true"/>
    <Measure aggregator="avg" column="math_test" name="Avg math test" visible="true"/>    
    <Measure aggregator="sum" column="avg_individual" name="PSU AVG individual" visible="true"/>

    <CalculatedMember dimension="Measures" name="PSU Average" visible="true">
      <Formula>
        <![CDATA[[Measures].[PSU AVG Individual] / [Measures].[Number of records]]]>
      </Formula>
    </CalculatedMember>

    <CalculatedMember dimension="Measures" name="PSU Rank">
      <Formula>
        <![CDATA[Rank(Geography.CurrentMember,
                 Order(Geography.CurrentMember.Level.Members,
                 Measures.[PSU Average], BDESC))]]>
      </Formula>
    </CalculatedMember>

    <CalculatedMember dimension="Measures" name="PSU Rank Decile" visible="true">
      <Formula>
        <![CDATA[((count(Geography.CurrentMember.Level.Members)-Measures.[PSU Rank]+1) * 10) / count(Geography.CurrentMember.Level.Members)]]>
      </Formula>
    </CalculatedMember>

    <CalculatedMember dimension="Measures" name="PSU Rank Total" visible="true">
      <Formula>
        <![CDATA[count(Geography.CurrentMember.Level.Members)]]>
      </Formula>
    </CalculatedMember>
  </Cube>

  <!-- / PSU -->

  <!-- Electoral data cube -->

  <Cube name="election_results">
    <Annotations>
      <Annotation name="source_name">Resultados Electorales - SERVEL</Annotation>
      <Annotation name="source_link">https://www.servel.cl/</Annotation>
      <Annotation name="topic">civics</Annotation>
    </Annotations>

    <Table name="fact_election_results" schema="politics"/>
    
    <Dimension name="Date">
      <Hierarchy hasAll="true">
        <Level column="year" nameColumn="year" name="Year" uniqueMembers="true"/>
      </Hierarchy>
    </Dimension>

    <DimensionUsage foreignKey="comuna_datachile_id" name="GeographyC" source="Geography"/>

    <DimensionUsage foreignKey="region_id" source="Geography Region" name="GeographyR" />

    <DimensionUsage foreignKey="election_id" name="Election Type" source="Election Type"/>

    <Dimension foreignKey="party_id" name="Party">
      <Annotations>
        <Annotation name="es_element_caption">Partido Político</Annotation>
      </Annotations>

      <Hierarchy hasAll="true">
	<Table name="dim_parties" schema="politics"/>
        <Level column="partido_id" name="Party" nameColumn="partido" uniqueMembers="true" />
      </Hierarchy>
    </Dimension>

    <Dimension foreignKey="elected" name="Elected">
      <Hierarchy hasAll="true">

        <InlineTable alias="party">
          <ColumnDefs>
            <ColumnDef name="id" type="Numeric"/>
            <ColumnDef name="description" type="String"/>
            <ColumnDef name="es_description" type="String"/>
          </ColumnDefs>
          <Rows>
            <Row>
              <Value column="id">1</Value>
              <Value column="description">Elected authority</Value>
              <Value column="es_description">Autoridad electa</Value>
            </Row>
            <Row>
              <Value column="id">0</Value>
              <Value column="description">Non-elected candidate</Value>
              <Value column="es_description">Candidato no electo</Value>
            </Row>
          </Rows>
        </InlineTable>
        
        <Level column="id" name="Elected" nameColumn="description" uniqueMembers="true">
          <Annotations>
            <Annotation name="es_caption">Description ES</Annotation>
          </Annotations>
          <Property column="es_description" name="Description ES"/>
        </Level>
      </Hierarchy>
    </Dimension>

    <Dimension foreignKey="candidate_id" name="Candidates">
      <Annotations>
        <Annotation name="es_element_caption">Candidatos</Annotation>
      </Annotations>

      <Hierarchy hasAll="true" primaryKey="candidate_id">
        <Table name="dim_candidates" schema="politics"/>
        <Level column="candidate_id" name="Candidate" nameColumn="candidate" uniqueMembers="true"/>
      </Hierarchy>
    </Dimension>

    <Measure aggregator="count" column="year" name="Number of records" visible="true"/>
    <Measure aggregator="max" column="votes" name="Votes" visible="true"/>

  </Cube>

  <!-- / Electoral data cube -->

  <!-- Electoral data update cube -->

  <Cube name="election_results_update">
    <Annotations>
      <Annotation name="source_name">Resultados Electorales - SERVEL</Annotation>
      <Annotation name="source_link">https://www.servel.cl/</Annotation>
      <Annotation name="topic">civics</Annotation>
    </Annotations>

    <Table name="fact_election_results_update" schema="politics"/>
    
    <Dimension name="Date">
      <Hierarchy hasAll="true">
        <Level column="year" nameColumn="year" name="Year" uniqueMembers="true"/>
      </Hierarchy>
    </Dimension>

    <DimensionUsage foreignKey="comuna_datachile_id" name="Geography" source="Geography"/>>

    <DimensionUsage foreignKey="election_id" name="Election Type" source="Election Type"/>

    <Dimension foreignKey="party_id" name="Party">
      <Hierarchy hasAll="true" primaryKey="partido_id">
        <Table name="dim_parties" schema="politics"/>
        <Level column="partido_id" name="Partido" nameColumn="partido" uniqueMembers="true"/>
      </Hierarchy>
    </Dimension>

    <Dimension foreignKey="candidate_id" name="Candidates">
      <Hierarchy hasAll="true" primaryKey="candidate_id">
        <Table name="dim_candidates" schema="politics"/>
        <Level column="candidate_id" name="Candidate" nameColumn="candidate" uniqueMembers="true"/>
      </Hierarchy>
    </Dimension>

    <Dimension foreignKey="coalition_id" name="Coalition">
      <Annotations>
        <Annotation name="es_element_caption">Coalición</Annotation>
      </Annotations>

      <Hierarchy hasAll="true">

        <InlineTable alias="coalition_id">
          <ColumnDefs>
            <ColumnDef name="id" type="Numeric" />
            <ColumnDef name="description" type="String" />
            <ColumnDef name="es_description" type="String" />
          </ColumnDefs>
          <Rows>
            <Row>
              <Value column="id">1</Value>
              <Value column="description">ALIANZA</Value>
              <Value column="es_description">ALIANZA</Value>
            </Row>
          <Row>
              <Value column="id">2</Value>
              <Value column="description">CANDIDATURA INDEPENDIENTE</Value>
              <Value column="es_description">CANDIDATURA INDEPENDIENTE</Value>
            </Row>
          <Row>
              <Value column="id">3</Value>
              <Value column="description">CHILE LIMPIO, VOTE FELIZ</Value>
              <Value column="es_description">CHILE LIMPIO, VOTE FELIZ</Value>
            </Row>
          <Row>
              <Value column="id">4</Value>
              <Value column="description">CHILE VAMOS</Value>
              <Value column="es_description">CHILE VAMOS</Value>
            </Row>
          <Row>
              <Value column="id">5</Value>
              <Value column="description">COALICION POR EL CAMBIO</Value>
              <Value column="es_description">COALICION POR EL CAMBIO</Value>
            </Row>
          <Row>
              <Value column="id">6</Value>
              <Value column="description">COALICION REGIONALISTA VERDE</Value>
              <Value column="es_description">COALICION REGIONALISTA VERDE</Value>
            </Row>
          <Row>
              <Value column="id">7</Value>
              <Value column="description">CONCERTACION Y JUNTOS PODEMOS MAS</Value>
              <Value column="es_description">CONCERTACION Y JUNTOS PODEMOS MAS</Value>
            </Row>
          <Row>
              <Value column="id">8</Value>
              <Value column="description">CONVERGENCIA DEMOCRATICA</Value>
              <Value column="es_description">CONVERGENCIA DEMOCRATICA</Value>
            </Row>
          <Row>
              <Value column="id">9</Value>
              <Value column="description">FRENTE AMPLIO</Value>
              <Value column="es_description">FRENTE AMPLIO</Value>
            </Row>
          <Row>
              <Value column="id">10</Value>
              <Value column="description">LA FUERZA DE LA MAYORIA</Value>
              <Value column="es_description">LA FUERZA DE LA MAYORIA</Value>
            </Row>
          <Row>
              <Value column="id">12</Value>
              <Value column="description">NUEVA CONSTITUCION PARA CHILE</Value>
              <Value column="es_description">NUEVA CONSTITUCION PARA CHILE</Value>
            </Row>
          <Row>
              <Value column="id">13</Value>
              <Value column="description">NUEVA MAYORIA</Value>
              <Value column="es_description">NUEVA MAYORIA</Value>
            </Row>
          <Row>
              <Value column="id">14</Value>
              <Value column="description">NUEVA MAYORIA PARA CHILE</Value>
              <Value column="es_description">NUEVA MAYORIA PARA CHILE</Value>
            </Row>
          <Row>
              <Value column="id">15</Value>
              <Value column="description">PARTIDO DE TRABAJADORES REVOLUCIONARIOS</Value>
              <Value column="es_description">PARTIDO DE TRABAJADORES REVOLUCIONARIOS</Value>
            </Row>
          <Row>
              <Value column="id">16</Value>
              <Value column="description">PARTIDO HUMANISTA</Value>
              <Value column="es_description">PARTIDO HUMANISTA</Value>
            </Row>
          <Row>
              <Value column="id">17</Value>
              <Value column="description">PARTIDO REGIONALISTA DE LOS INDEPENDIENTES</Value>
              <Value column="es_description">PARTIDO REGIONALISTA DE LOS INDEPENDIENTES</Value>
            </Row>
          <Row>
              <Value column="id">18</Value>
              <Value column="description">POR TODO CHILE</Value>
              <Value column="es_description">POR TODO CHILE</Value>
            </Row>
          <Row>
              <Value column="id">19</Value>
              <Value column="description">SI TU QUIERES, CHILE CAMBIA</Value>
              <Value column="es_description">SI TU QUIERES, CHILE CAMBIA</Value>
            </Row>
          <Row>
              <Value column="id">20</Value>
              <Value column="description">SUMEMOS</Value>
              <Value column="es_description">SUMEMOS</Value>
            </Row>
          <Row>
              <Value column="id">21</Value>
              <Value column="description">UNION PATRIOTICA</Value>
              <Value column="es_description">UNION PATRIOTICA</Value>
            </Row>
          <Row>
              <Value column="id">0</Value>
              <Value column="description">NAN</Value>
              <Value column="es_description">NAN</Value>
            </Row>
          </Rows>
        </InlineTable>
        
        <Level column="id" name="Coalition" nameColumn="description" uniqueMembers="true">
          <Annotations>
            <Annotation name="es_caption">Description ES</Annotation>
          </Annotations>
          <Property column="es_description" name="Description ES"/>
        </Level>
      </Hierarchy>
    </Dimension>

    <Dimension foreignKey="elected" name="Elected">
      <Annotations>
        <Annotation name="es_element_caption">Electo</Annotation>
      </Annotations>

      <Hierarchy hasAll="true">

        <InlineTable alias="party">
          <ColumnDefs>
            <ColumnDef name="id" type="Numeric"/>
            <ColumnDef name="description" type="String"/>
            <ColumnDef name="es_description" type="String"/>
          </ColumnDefs>
          <Rows>
            <Row>
              <Value column="id">1</Value>
              <Value column="description">Elected authority</Value>
              <Value column="es_description">Autoridad electa</Value>
            </Row>
            <Row>
              <Value column="id">0</Value>
              <Value column="description">Non-elected candidate</Value>
              <Value column="es_description">Candidato no electo</Value>
            </Row>
          </Rows>
        </InlineTable>
        
        <Level column="id" name="Elected" nameColumn="description" uniqueMembers="true">
          <Annotations>
            <Annotation name="es_caption">Description ES</Annotation>
          </Annotations>
          <Property column="es_description" name="Description ES"/>
        </Level>
      </Hierarchy>
    </Dimension>

    <Measure aggregator="count" column="year" name="Number of records" visible="true"/>
    <Measure aggregator="sum" column="votes" name="Votes" visible="true">
      <Annotations>
        <Annotation name="es_element_caption">Resultado electoral en votos</Annotation>
        <Annotation name="es_format">XXX</Annotation>
      </Annotations>
    </Measure>

  </Cube>

  <!-- / Electoral data update cube -->

  <!-- Electoral Participation data cube -->

  <Cube name="election_participation">
    <Annotations>
      <Annotation name="source_name">Participación Electoral - SERVEL</Annotation>
      <Annotation name="source_link">https://www.servel.cl/</Annotation>
      <Annotation name="topic">civics</Annotation>
    </Annotations>

    <Table name="fact_election_participation" schema="politics"/>
    
    <Dimension name="Date">
      <Hierarchy hasAll="true">
        <Level column="year" nameColumn="year" name="Year" uniqueMembers="true"/>
      </Hierarchy>
    </Dimension>

    <DimensionUsage foreignKey="comuna_datachile_id" name="Geography" source="Geography"/>

    <DimensionUsage foreignKey="election_id" name="Election Type" source="Election Type"/>

    <Measure aggregator="count" column="year" name="Number of records" visible="true"/>
    <Measure aggregator="sum" column="total_electores" name="Electors" visible="true">
      <Annotations>
        <Annotation name="es_element_caption">Electores habilitados</Annotation>
        <Annotation name="es_format">XXX</Annotation>
      </Annotations>
    </Measure>
    <Measure aggregator="sum" column="total_votacion" name="Votes" visible="true">
      <Annotations>
        <Annotation name="es_element_caption">Electores que votaron</Annotation>
        <Annotation name="es_format">XXX</Annotation>
      </Annotations>
    </Measure>

    <CalculatedMember dimension="Measures" name="Participation" visible="true">
      <Annotations>
        <Annotation name="es_element_caption">Participación electoral (%)</Annotation>
        <Annotation name="es_format">XXX</Annotation>
      </Annotations>
      <Formula>
        <![CDATA[([Measures].[Votes] / [Measures].[Electors])]]>
      </Formula>
    </CalculatedMember>

  </Cube>

  <!-- / Electoral Participation cube -->

  <!-- Education enrollment data cube -->

  <Cube name="education_enrollment">
    <Annotations>
      <Annotation name="source_name">Matricula escolar - MINEDUC</Annotation>
      <Annotation name="source_link">http://datosabiertos.mineduc.cl/informacion-investigadores-establecimientos/</Annotation>
      <Annotation name="topic">education</Annotation>
    </Annotations>

    <Table name="fact_enrollment" schema="education"/>
    
    <DimensionUsage foreignKey="date_id" name="Date" source="Date"/>
    <DimensionUsage foreignKey="comuna_datachile_id" name="Geography" source="Geography"/>
    <DimensionUsage foreignKey="sex_id" name="Sex" source="Sex"/>
    <DimensionUsage foreignKey="rural_id" name="Zone" source="Zone"/>
    <DimensionUsage foreignKey="administration_id" name="Administration" source="Administration"/>
    <DimensionUsage foreignKey="institution_id" name="Institutions" source="Institution"/>
    <DimensionUsage foreignKey="teaching_id" name="Teachings" source="Teaching"/>

    <Measure aggregator="count" column="year" name="Number of records" visible="true">
      <Annotations>
        <Annotation name="es_element_caption">Estudiantes matriculados</Annotation>
        <Annotation name="es_format">XXX</Annotation>
      </Annotations>
    </Measure>
    <Measure aggregator="avg" column="age" name="Average Age" visible="true">
      <Annotations>
        <Annotation name="es_element_caption">Edad promedio de estudiantes matriculados</Annotation>
        <Annotation name="es_format">XXX</Annotation>
      </Annotations>
    </Measure>

    <NamedSet description="Set of school types (Teachings) that indicate special education" name="Special Education Teachings">
      <Formula>
        <![CDATA[
                 {[Teachings].[Teaching].[Teaching].&[211],[Teachings].[Teaching].[Teaching].&[212],[Teachings].[Teaching].[Teaching].&[213],[Teachings].[Teaching].[Teaching].&[214],[Teachings].[Teaching].[Teaching].&[215],[Teachings].[Teaching].[Teaching].&[216],[Teachings].[Teaching].[Teaching].&[217]}
        ]]>
      </Formula>
    </NamedSet>



  </Cube>

  <!-- / Education enrollment data cube -->

  <!-- Education performance data cube -->

  <Cube name="education_performance">
    <Annotations>
      <Annotation name="source_name">Rendimiento escolar y PSU - DEMRE</Annotation>
      <Annotation name="source_link">http://psu.demre.cl/</Annotation>
      <Annotation name="topic">education</Annotation>
    </Annotations>

    <Table name="fact_performance" schema="education"/>
    
    <DimensionUsage foreignKey="date_id" name="Date" source="Date"/>
    <DimensionUsage foreignKey="comuna_datachile_id" name="Geography" source="Geography"/>
    <DimensionUsage foreignKey="sex_id" name="Sex" source="Sex"/>
    <DimensionUsage foreignKey="rural_id" name="Zone" source="Zone"/>
    <DimensionUsage foreignKey="administration_id" name="Administration" source="Administration"/>
    <DimensionUsage foreignKey="institution_id" name="Institutions" source="Institution"/>
    <DimensionUsage foreignKey="teaching_id" name="Teachings" source="Teaching"/>

    <Measure aggregator="count" column="year" name="Number of records" visible="true"/>
    <Measure aggregator="avg" column="scores_average" name="Average Score Average (?)" visible="true"/>
  </Cube>

  <!-- / Education performance data cube -->


  <Cube name="education_performance_new">
    <Annotations>
      <Annotation name="source_name">Rendimiento escolar y PSU - DEMRE</Annotation>
      <Annotation name="source_link">http://psu.demre.cl/</Annotation>
      <Annotation name="topic">education</Annotation>
    </Annotations>

    <View alias="dim_regions">
    	<SQL><![CDATA[(SELECT *, promlm_actual AS prom_psu FROM education.fact_registered WHERE promlm_actual IS NOT NULL OR nem IS NOT NULL)]]></SQL>
    </View>

    <Dimension name="Year">
      <Hierarchy hasAll="true">
        <Level column="anio_proceso" nameColumn="anio_proceso" name="Year" uniqueMembers="true"/>
      </Hierarchy>
    </Dimension>

    <DimensionUsage foreignKey="rbd" name="Institution" source="Institution New" />
    <DimensionUsage foreignKey="comuna_datachile_id" name="Geography" source="Geography"/>
    <DimensionUsage foreignKey="sex_id" name="Sex" source="Sex"/>
    <DimensionUsage foreignKey="grupo_dependencia_id" name="Administration" source="Administration" />

    <Measure aggregator="count" column="anio_proceso" name="Number of records" visible="true" />
    <Measure aggregator="avg" column="prom_psu" name="Average PSU" visible="true" />
    <Measure aggregator="avg" column="nem" name="Average NEM" visible="true" />
  </Cube>


  <!-- Education employability data cube -->

  <Cube name="education_employability">
    <Table name="fact_employability" schema="education"/>
    
    <Dimension foreignKey="career_id" name="Careers">
      <Annotations>
        <Annotation name="index_as">careers</Annotation>
      </Annotations>
      <Hierarchy hasAll="true" primaryKey="career_id">
        <Table name="dim_careers" schema="education"/>
        <Level column="career_group_id" name="Career Group" nameColumn="career_group_en" uniqueMembers="true">
          <Annotations>
            <Annotation name="es_caption">Description ES</Annotation>
          </Annotations>
          <Property column="career_group" name="Description ES"/>
        </Level>
        <Level column="career_id" name="Career" nameColumn="career_en" uniqueMembers="true">
          <Annotations>
            <Annotation name="es_caption">Description ES</Annotation>
          </Annotations>
          <Property column="career" name="Description ES"/>
        </Level>
      </Hierarchy>
    </Dimension>

    <Dimension foreignKey="higher_educational_institution_id" name="Higher Institutions">
      <Annotations>
        <Annotation name="index_as">institutions</Annotation>
        <Annotation name="index_min_depth">2</Annotation>
      </Annotations>
      <Hierarchy hasAll="true" primaryKey="institution_id">
        <Table name="dim_higher_educational_institutions" schema="education"/>
        <Level column="institution_group_id" name="Higher Institution Group" nameColumn="institution_group" uniqueMembers="true">
          <Annotations>
            <Annotation name="es_caption">Group ES</Annotation>
          </Annotations>
          <Property column="institution_group_es" name="Group ES"/>
        </Level>
        <Level column="institution_subgroup_id" name="Higher Institution Subgroup" nameColumn="institution_subgroup" uniqueMembers="true">
          <Annotations>     
            <Annotation name="es_caption">Subgroup ES</Annotation>
          </Annotations>
          <Property column="institution_subgroup_es" name="Subgroup ES"/>
        </Level>
        <Level column="institution_id" name="Higher Institution" nameColumn="institution" uniqueMembers="true"/>
      </Hierarchy>
    </Dimension>

    <Dimension foreignKey="accreditation_id" name="Accreditations">
      <Hierarchy hasAll="true">
        <InlineTable alias="accreditation">
          <ColumnDefs>
            <ColumnDef name="id" type="Numeric"/>
            <ColumnDef name="description" type="String"/>
            <ColumnDef name="es_description" type="String"/>
          </ColumnDefs>
          <Rows>
            <Row>
              <Value column="id">0</Value>
              <Value column="description">No</Value>
              <Value column="es_description">No</Value>
            </Row>
            <Row>
              <Value column="id">1</Value>
              <Value column="description">2 years</Value>
              <Value column="es_description">2 años</Value>
            </Row>
            <Row>
              <Value column="id">2</Value>
              <Value column="description">3 years</Value>
              <Value column="es_description">3 años</Value>
            </Row>
            <Row>
              <Value column="id">3</Value>
              <Value column="description">4 years</Value>
              <Value column="es_description">4 años</Value>
            </Row>
            <Row>
              <Value column="id">4</Value>
              <Value column="description">5 years</Value>
              <Value column="es_description">5 años</Value>
            </Row>
            <Row>
              <Value column="id">5</Value>
              <Value column="description">6 years</Value>
              <Value column="es_description">6 años</Value>
            </Row>
            <Row>
              <Value column="id">6</Value>
              <Value column="description">7 years</Value>
              <Value column="es_description">7 años</Value>
            </Row>
          </Rows>
        </InlineTable>
        
        <Level column="id" name="Accreditation" nameColumn="description" uniqueMembers="true">
          <Annotations>
            <Annotation name="es_caption">Description ES</Annotation>
          </Annotations>
          <Property column="es_description" name="Description ES"/>
        </Level>
      </Hierarchy>
    </Dimension>

    <Dimension foreignKey="fourth_year_average_salary_id" name="Avg Income 4th year">
      <Hierarchy hasAll="true">
        <InlineTable alias="fourth_year_average_salary_id">
          <ColumnDefs>
            <ColumnDef name="id" type="Numeric"/>
            <ColumnDef name="description" type="String"/>
            <ColumnDef name="es_description" type="String"/>
          </ColumnDefs>
          <Rows>
            <Row>
              <Value column="id">0</Value>
              <Value column="description">No data</Value>
              <Value column="es_description">No informa</Value>
            </Row>
            <Row>
              <Value column="id">1</Value>
              <Value column="description">De $300 mil a $400 mil</Value>
              <Value column="es_description">De $300 mil a $400 mil</Value>
            </Row>
            <Row>
              <Value column="id">2</Value>
              <Value column="description">De $400 mil a $500 mil</Value>
              <Value column="es_description">De $400 mil a $500 mil</Value>
            </Row>
            <Row>
              <Value column="id">3</Value>
              <Value column="description">De $500 mil a $600 mil</Value>
              <Value column="es_description">De $500 mil a $600 mil</Value>
            </Row>
            <Row>
              <Value column="id">4</Value>
              <Value column="description">De $600 mil a $700 mil</Value>
              <Value column="es_description">De $600 mil a $700 mil</Value>
            </Row>
            <Row>
              <Value column="id">5</Value>
              <Value column="description">De $700 mil a $800 mil</Value>
              <Value column="es_description">De $700 mil a $800 mil</Value>
            </Row>
            <Row>
              <Value column="id">6</Value>
              <Value column="description">De $800 mil a $900 mil</Value>
              <Value column="es_description">De $800 mil a $900 mil</Value>
            </Row>
            <Row>
              <Value column="id">7</Value>
              <Value column="description">De $900 mil a $1 millón</Value>
              <Value column="es_description">De $900 mil a $1 millón</Value>
            </Row>
            <Row>
              <Value column="id">8</Value>
              <Value column="description">De $1 millón a $1 millón 100 mil</Value>
              <Value column="es_description">De $1 millón a $1 millón 100 mil</Value>
            </Row>
            <Row>
              <Value column="id">9</Value>
              <Value column="description">De $1 millón 100 mil a $1 millón 200 mil</Value>
              <Value column="es_description">De $1 millón 100 mil a $1 millón 200 mil</Value>
            </Row>
            <Row>
              <Value column="id">10</Value>
              <Value column="description">De $1 millón 200 mil a $1 millón 300 mil</Value>
              <Value column="es_description">De $1 millón 200 mil a $1 millón 300 mil</Value>
            </Row>
            <Row>
              <Value column="id">11</Value>
              <Value column="description">De $1 millón 300 mil a $1 millón 400 mil</Value>
              <Value column="es_description">De $1 millón 300 mil a $1 millón 400 mil</Value>
            </Row>
            <Row>
              <Value column="id">12</Value>
              <Value column="description">De $1 millón 400 mil a $1 millón 500 mil</Value>
              <Value column="es_description">De $1 millón 400 mil a $1 millón 500 mil</Value>
            </Row>
            <Row>
              <Value column="id">13</Value>
              <Value column="description">De $1 millón 500 mil a $1 millón 600 mil</Value>
              <Value column="es_description">De $1 millón 500 mil a $1 millón 600 mil</Value>
            </Row>
            <Row>
              <Value column="id">14</Value>
              <Value column="description">De $1 millón 600 mil a $1 millón 700 mil</Value>
              <Value column="es_description">De $1 millón 600 mil a $1 millón 700 mil</Value>
            </Row>
            <Row>
              <Value column="id">15</Value>
              <Value column="description">De $1 millón 700 mil a $1 millón 800 mil</Value>
              <Value column="es_description">De $1 millón 700 mil a $1 millón 800 mil</Value>
            </Row>
            <Row>
              <Value column="id">16</Value>
              <Value column="description">De $1 millón 800 mil a $1 millón 900 mil</Value>
              <Value column="es_description">De $1 millón 800 mil a $1 millón 900 mil</Value>
            </Row>
            <Row>
              <Value column="id">17</Value>
              <Value column="description">De $1 millón 900 mil a $2 millones</Value>
              <Value column="es_description">De $1 millón 900 mil a $2 millones</Value>
            </Row>
            <Row>
              <Value column="id">18</Value>
              <Value column="description">De $2 millones a $2 millones 100 mil</Value>
              <Value column="es_description">De $2 millones a $2 millones 100 mil</Value>
            </Row>
            <Row>
              <Value column="id">19</Value>
              <Value column="description">De $2 millones 100 mil a $2 millones 200 mil</Value>
              <Value column="es_description">De $2 millones 100 mil a $2 millones 200 mil</Value>
            </Row>
            <Row>
              <Value column="id">20</Value>
              <Value column="description">De $2 millones 200 mil a $2 millones 300 mil</Value>
              <Value column="es_description">De $2 millones 200 mil a $2 millones 300 mil</Value>
            </Row>
            <Row>
              <Value column="id">21</Value>
              <Value column="description">De $2 millones 300 mil a $2 millones 400 mil</Value>
              <Value column="es_description">De $2 millones 300 mil a $2 millones 400 mil</Value>
            </Row>
            <Row>
              <Value column="id">22</Value>
              <Value column="description">De $2 millones 400 mil a $2 millones 500 mil</Value>
              <Value column="es_description">De $2 millones 400 mil a $2 millones 500 mil</Value>
            </Row>
            <Row>
              <Value column="id">23</Value>
              <Value column="description">Sobre $2 millones 500 mil</Value>
              <Value column="es_description">Sobre $2 millones 500 mil</Value>
            </Row>
          </Rows>
        </InlineTable>
        
        <Level column="id" name="Avg Income 4th year" nameColumn="description" uniqueMembers="true">
          <Annotations>
            <Annotation name="es_caption">Description ES</Annotation>
          </Annotations>
          <Property column="es_description" name="Description ES"/>
        </Level>
      </Hierarchy>
    </Dimension>

    <Measure aggregator="count" column="higher_educational_institution_id" name="Number of records" visible="true"/>
    
    <Measure aggregator="avg" column="subsidized_percent" name="Avg subsidized" visible="true"/>
    
    <Measure aggregator="avg" column="first_year_retention" name="Avg Retention 1st year" visible="true"/>
    
    <Measure aggregator="avg" column="real_duration_in_terms" name="Avg Duration in semesters" visible="true"/>

    <Measure aggregator="avg" column="first_year_employability" name="Avg employability 1st year" visible="true"/>

    <Measure aggregator="avg" column="tuition_cost_2016" name="Avg anual payment 2016" visible="true"/>
    
    <Measure aggregator="sum" column="tuition_cost_2016" name="Sum anual payment 2016" visible="true"/>

  </Cube>

  <!-- / Education employability data cube -->

  <!-- Education performance indicators sned data cube -->

  <Cube name="education_sned">
    <Table name="fact_sned" schema="education"/>

    <Dimension name="Date">
      <Hierarchy hasAll="true">
        <Level column="year" nameColumn="year" name="Year" uniqueMembers="true"/>
      </Hierarchy>
    </Dimension>
    
    <DimensionUsage foreignKey="comuna_datachile_id" name="Geography" source="Geography"/>
    <DimensionUsage foreignKey="institution_id" name="Institutions" source="Institution"/>

    <Dimension foreignKey="cluster_id" name="Cluster">
      <Hierarchy hasAll="true">
        
        <InlineTable alias="cluster">
          <ColumnDefs>
            <ColumnDef name="e1a_id" type="Numeric" />
            <ColumnDef name="e1a_description" type="String" />
            <ColumnDef name="e1a_es_description" type="String" />

            <ColumnDef name="e1b_id" type="Numeric" />
            <ColumnDef name="e1b_description" type="String" />
            <ColumnDef name="e1b_es_description" type="String" />

            <ColumnDef name="e2_id" type="Numeric" />
            <ColumnDef name="e2_description" type="String" />
            <ColumnDef name="e2_es_description" type="String" />
          </ColumnDefs>
          <Rows>
            <Row>
              <Value column="e1a_id">1</Value>
              <Value column="e1a_description">Urban</Value>
              <Value column="e1a_es_description">Urbana</Value>

              <Value column="e1b_id">1</Value>
              <Value column="e1b_description">Urban primary</Value>
              <Value column="e1b_es_description">Básica urbana</Value>

              <Value column="e2_id">11</Value>
              <Value column="e2_description">Urban primary group 1</Value>
              <Value column="e2_es_description">Básica urbana grupo 1</Value>
            </Row>
          <Row>
              <Value column="e1a_id">1</Value>
              <Value column="e1a_description">Urban</Value>
              <Value column="e1a_es_description">Urbana</Value>

              <Value column="e1b_id">1</Value>
              <Value column="e1b_description">Urban primary</Value>
              <Value column="e1b_es_description">Básica urbana</Value>

              <Value column="e2_id">12</Value>
              <Value column="e2_description">Urban primary group 2</Value>
              <Value column="e2_es_description">Básica urbana grupo 2</Value>
            </Row>
          <Row>
              <Value column="e1a_id">1</Value>
              <Value column="e1a_description">Urban</Value>
              <Value column="e1a_es_description">Urbana</Value>

              <Value column="e1b_id">1</Value>
              <Value column="e1b_description">Urban primary</Value>
              <Value column="e1b_es_description">Básica urbana</Value>

              <Value column="e2_id">13</Value>
              <Value column="e2_description">Urban primary group 3</Value>
              <Value column="e2_es_description">Básica urbana grupo 3</Value>
            </Row>
          <Row>
              <Value column="e1a_id">1</Value>
              <Value column="e1a_description">Urban</Value>
              <Value column="e1a_es_description">Urbana</Value>

              <Value column="e1b_id">2</Value>
              <Value column="e1b_description">Urban secondary (with or without primary)</Value>
              <Value column="e1b_es_description">Media urbana (con o sin básica)</Value>

              <Value column="e2_id">31</Value>
              <Value column="e2_description">Urban secondary (with or without primary) group 1</Value>
              <Value column="e2_es_description">Media urbana (con o sin básica) grupo 1</Value>
            </Row>
          <Row>
              <Value column="e1a_id">1</Value>
              <Value column="e1a_description">Urban</Value>
              <Value column="e1a_es_description">Urbana</Value>

              <Value column="e1b_id">2</Value>
              <Value column="e1b_description">Urban secondary (with or without primary)</Value>
              <Value column="e1b_es_description">Media urbana (con o sin básica)</Value>

              <Value column="e2_id">32</Value>
              <Value column="e2_description">Urban secondary (with or without primary) group 2</Value>
              <Value column="e2_es_description">Media urbana (con o sin básica) grupo 2</Value>
            </Row>
          <Row>
              <Value column="e1a_id">1</Value>
              <Value column="e1a_description">Urban</Value>
              <Value column="e1a_es_description">Urbana</Value>

              <Value column="e1b_id">2</Value>
              <Value column="e1b_description">Urban secondary (with or without primary)</Value>
              <Value column="e1b_es_description">Media urbana (con o sin básica)</Value>

              <Value column="e2_id">33</Value>
              <Value column="e2_description">Urban secondary (with or without primary) group 3</Value>
              <Value column="e2_es_description">Media urbana (con o sin básica) grupo 3</Value>
            </Row>
          <Row>
              <Value column="e1a_id">2</Value>
              <Value column="e1a_description">Rural</Value>
              <Value column="e1a_es_description">Rural</Value>

              <Value column="e1b_id">3</Value>
              <Value column="e1b_description">Rural primary</Value>
              <Value column="e1b_es_description">Básica rural</Value>

              <Value column="e2_id">21</Value>
              <Value column="e2_description">Rural primary group 1</Value>
              <Value column="e2_es_description">Básica rural grupo 1</Value>
            </Row>
          <Row>
              <Value column="e1a_id">2</Value>
              <Value column="e1a_description">Rural</Value>
              <Value column="e1a_es_description">Rural</Value>

              <Value column="e1b_id">3</Value>
              <Value column="e1b_description">Rural primary</Value>
              <Value column="e1b_es_description">Básica rural</Value>

              <Value column="e2_id">22</Value>
              <Value column="e2_description">Rural primary group 2</Value>
              <Value column="e2_es_description">Básica rural grupo 2</Value>
            </Row>
          <Row>
              <Value column="e1a_id">2</Value>
              <Value column="e1a_description">Rural</Value>
              <Value column="e1a_es_description">Rural</Value>

              <Value column="e1b_id">3</Value>
              <Value column="e1b_description">Rural primary</Value>
              <Value column="e1b_es_description">Básica rural</Value>

              <Value column="e2_id">23</Value>
              <Value column="e2_description">Rural primary group 3</Value>
              <Value column="e2_es_description">Básica rural grupo 3</Value>
            </Row>
          <Row>
              <Value column="e1a_id">2</Value>
              <Value column="e1a_description">Rural</Value>
              <Value column="e1a_es_description">Rural</Value>

              <Value column="e1b_id">4</Value>
              <Value column="e1b_description">Rural secondary (with or without primary)</Value>
              <Value column="e1b_es_description">Media rural (con o sin básica)</Value>

              <Value column="e2_id">41</Value>
              <Value column="e2_description">Rural secondary (with or without primary) group 1</Value>
              <Value column="e2_es_description">Media rural (con o sin básica) grupo 1</Value>
            </Row>
          <Row>
              <Value column="e1a_id">3</Value>
              <Value column="e1a_description">Special education</Value>
              <Value column="e1a_es_description">Educación especial</Value>

              <Value column="e1b_id">5</Value>
              <Value column="e1b_description">Special education</Value>
              <Value column="e1b_es_description">Educación especial</Value>

              <Value column="e2_id">51</Value>
              <Value column="e2_description">Special education group 1</Value>
              <Value column="e2_es_description">Educación especial grupo 1</Value>
            </Row>
          </Rows>
        </InlineTable>
        
        <Level column="e1a_id" name="Stage 1a" nameColumn="e1a_description" uniqueMembers="true">
          <Annotations>
            <Annotation name="es_caption">Description ES</Annotation>
          </Annotations>
          <Property column="e1a_es_description" name="Description ES"/>
        </Level>
        <Level column="e1b_id" name="Stage 1b" nameColumn="e1b_description" uniqueMembers="true">
          <Annotations>
            <Annotation name="es_caption">Description ES</Annotation>
          </Annotations>
          <Property column="e1b_es_description" name="Description ES"/>
        </Level>
        <Level column="e2_id" name="Stage 2" nameColumn="e2_description" uniqueMembers="true">
          <Annotations>
            <Annotation name="es_caption">Description ES</Annotation>
          </Annotations>
          <Property column="e2_es_description" name="Description ES"/>
        </Level>

      </Hierarchy>
    </Dimension>

    <Dimension foreignKey="administration_id" name="Administration">
      <Hierarchy hasAll="true">
        
        <InlineTable alias="administration">
          <ColumnDefs>
            <ColumnDef name="id" type="Numeric" />
            <ColumnDef name="description" type="String" />
            <ColumnDef name="es_description" type="String" />
          </ColumnDefs>
          <Rows>
            <Row>
              <Value column="id">0</Value>
              <Value column="description">nan</Value>
              <Value column="es_description">nan</Value>
            </Row>
          <Row>
              <Value column="id">1</Value>
              <Value column="description">Municipal</Value>
              <Value column="es_description">Municipal</Value>
            </Row>
          <Row>
              <Value column="id">2</Value>
              <Value column="description">Particular Subvencionado</Value>
              <Value column="es_description">Particular Subvencionado</Value>
            </Row>
          <Row>
              <Value column="id">4</Value>
              <Value column="description">Corporación de Administración Delegada</Value>
              <Value column="es_description">Corporación de Administración Delegada</Value>
            </Row>
          </Rows>
        </InlineTable>
        
        <Level column="id" name="Administration" nameColumn="description" uniqueMembers="true">
          <Annotations>
            <Annotation name="es_caption">Description ES</Annotation>
          </Annotations>
          <Property column="es_description" name="Description ES"/>
        </Level>
      </Hierarchy>
    </Dimension>

    <Dimension foreignKey="subsidized_100pc_id" name="Subsidized 100%">
      <Hierarchy hasAll="true">
        
        <InlineTable alias="subsidized_100pc">
          <ColumnDefs>
            <ColumnDef name="id" type="Numeric" />
            <ColumnDef name="description" type="String" />
            <ColumnDef name="es_description" type="String" />
          </ColumnDefs>
          <Rows>
            <Row>
              <Value column="id">0</Value>
              <Value column="description">nan</Value>
              <Value column="es_description">nan</Value>
            </Row>
          <Row>
              <Value column="id">1</Value>
              <Value column="description">Obtains 100% subsidy</Value>
              <Value column="es_description">Obtiene 100% subvención</Value>
            </Row>
          <Row>
              <Value column="id">2</Value>
              <Value column="description">Does not obtain 100% subsidy</Value>
              <Value column="es_description">No obtiene 100% subvención</Value>
            </Row>
          </Rows>
        </InlineTable>
        
        <Level column="id" name="Subsidized 100%" nameColumn="description" uniqueMembers="true">
          <Annotations>
            <Annotation name="es_caption">Description ES</Annotation>
          </Annotations>
          <Property column="es_description" name="Description ES"/>
        </Level>
      </Hierarchy>
    </Dimension>

    <Dimension foreignKey="subsidized_60pc_id" name="Subsidized 60%">
      <Hierarchy hasAll="true">
        
        <InlineTable alias="subsidized_60pc">
          <ColumnDefs>
            <ColumnDef name="id" type="Numeric" />
            <ColumnDef name="description" type="String" />
            <ColumnDef name="es_description" type="String" />
          </ColumnDefs>
          <Rows>
            <Row>
              <Value column="id">0</Value>
              <Value column="description">nan</Value>
              <Value column="es_description">nan</Value>
            </Row>
          <Row>
              <Value column="id">1</Value>
              <Value column="description">Obtains 60% subsidy</Value>
              <Value column="es_description">Obtiene 60% subvención</Value>
            </Row>
          <Row>
              <Value column="id">2</Value>
              <Value column="description">Does not obtain 60% subsidy</Value>
              <Value column="es_description">No obtiene 60% subvención</Value>
            </Row>
          </Rows>
        </InlineTable>
        
        <Level column="id" name="Subsidized 60%" nameColumn="description" uniqueMembers="true">
          <Annotations>
            <Annotation name="es_caption">Description ES</Annotation>
          </Annotations>
          <Property column="es_description" name="Description ES"/>
        </Level>
      </Hierarchy>
    </Dimension>

    <Measure aggregator="count" column="year" name="Number of records" visible="true"/>
    <Measure aggregator="avg" column="efectiveness" name="Avg efectiveness" visible="true"/>
    <Measure aggregator="avg" column="overcoming" name="Avg overcoming" visible="true"/>
    <Measure aggregator="avg" column="initiative" name="Avg initiative" visible="true"/>
    <Measure aggregator="avg" column="integration" name="Avg integration" visible="true"/>
    <Measure aggregator="avg" column="improvement" name="Avg improvement" visible="true"/>
    <Measure aggregator="avg" column="fairness" name="Avg fairness" visible="true"/>
    <Measure aggregator="avg" column="sned_score" name="Avg sned_score" visible="true"/>

  </Cube>

  <!-- / Education performance data cube -->

  <!-- CASEN household data cube -->

  <Cube name="casen_household">
    <Annotations>
      <Annotation name="source_name">Encuesta CASEN</Annotation>
      <Annotation name="source_link">http://observatorio.ministeriodesarrollosocial.gob.cl/casen-multidimensional/casen/basedatos.php</Annotation>
      <Annotation name="topic">environment</Annotation>
    </Annotations>

    <Table name="fact_household_casen" schema="environment"/>
    
    <DimensionUsage foreignKey="date_id" name="Date" source="Date"/>
    <DimensionUsage foreignKey="comuna_datachile_id" name="Geography" source="Geography"/>

    <Dimension foreignKey="zone_id" name="Zone Id">
      <Annotations>
        <Annotation name="es_element_caption">Zona</Annotation>
      </Annotations>
        
      <Hierarchy hasAll="true">
        <InlineTable alias="zone_id">
          <ColumnDefs>
            <ColumnDef name="id" type="Numeric"/>
            <ColumnDef name="description" type="String"/>
            <ColumnDef name="es_description" type="String"/>
          </ColumnDefs>
          <Rows>
            <Row>
              <Value column="id">1</Value>
              <Value column="description">Urban</Value>
              <Value column="es_description">urbano</Value>
            </Row>
            <Row>
              <Value column="id">2</Value>
              <Value column="description">Rural</Value>
              <Value column="es_description">rural</Value>
            </Row>
          </Rows>
        </InlineTable>
        
        <Level column="id" name="Zone Id" nameColumn="description" uniqueMembers="true">
          <Annotations>
            <Annotation name="es_caption">Description ES</Annotation>
          </Annotations>
          <Property column="es_description" name="Description ES"/>
        </Level>
      </Hierarchy>
    </Dimension>


    <Dimension foreignKey="household_type" name="Household Type">
      <Annotations>
        <Annotation name="es_element_caption">Tipo de Casa</Annotation>
      </Annotations>
        
      <Hierarchy hasAll="true">
        <InlineTable alias="household_type">
          <ColumnDefs>
            <ColumnDef name="id" type="Numeric"/>
            <ColumnDef name="description" type="String"/>
            <ColumnDef name="es_description" type="String"/>
          </ColumnDefs>
          <Rows>
            <Row>
              <Value column="id">1</Value>
              <Value column="description">Detached</Value>
              <Value column="es_description">Casa aislada (no pareada)</Value>
            </Row>
            <Row>
              <Value column="id">2</Value>
              <Value column="description">Semi detached</Value>
              <Value column="es_description">Casa pareada por un lado</Value>
            </Row>
            <Row>
              <Value column="id">3</Value>
              <Value column="description">Undetached</Value>
              <Value column="es_description">Casa pareada por ambos lados</Value>
            </Row>
            <Row>
              <Value column="id">4</Value>
              <Value column="description">Apartment in builiding with elevator</Value>
              <Value column="es_description">Departamento en edificio con ascensor</Value>
            </Row>
            <Row>
              <Value column="id">5</Value>
              <Value column="description">Apartment in builiding without elevator</Value>
              <Value column="es_description">Departamento en edificio sin ascensor</Value>
            </Row>
            <Row>
              <Value column="id">6</Value>
              <Value column="description">Room in old house or conventillo</Value>
              <Value column="es_description">Pieza en casa antigua o conventillo</Value>
            </Row>
            <Row>
              <Value column="id">7</Value>
              <Value column="description">mediagua, mejora o vivienda de emergencia</Value>
              <Value column="es_description">Mediagua, mejora o vivienda de emergencia</Value>
            </Row>
            <Row>
              <Value column="id">8</Value>
              <Value column="description">Indigenous native house</Value>
              <Value column="es_description">Vivienda tradicional indígena</Value>
            </Row>
            <Row>
              <Value column="id">9</Value>
              <Value column="description">Ranch or shack</Value>
              <Value column="es_description">Rancho o choza</Value>
            </Row>
            <Row>
              <Value column="id">10</Value>
              <Value column="description">Precarious house made out of recycling materials (cans, plastics, cardboard, etc.)</Value>
              <Value column="es_description">Vivienda precaria de materiales reutilizados (latas, plásticos, cartones, etc.)</Value>
            </Row>
          </Rows>
        </InlineTable>
        
        <Level column="id" name="Household Type" nameColumn="description" uniqueMembers="true">
          <Annotations>
            <Annotation name="es_caption">Description ES</Annotation>
          </Annotations>
          <Property column="es_description" name="Description ES"/>
        </Level>
      </Hierarchy>
    </Dimension>
    
    <Dimension foreignKey="walls_material" name="Walls Material">
      <Annotations>
        <Annotation name="es_element_caption">Material de las paredes</Annotation>
      </Annotations>
        
      <Hierarchy hasAll="true">
        
        <InlineTable alias="walls_material">
          <ColumnDefs>
            <ColumnDef name="id" type="Numeric"/>
            <ColumnDef name="description" type="String"/>
            <ColumnDef name="es_description" type="String"/>
          </ColumnDefs>
          <Rows>
            <Row>
              <Value column="id">1</Value>
              <Value column="description">hormigón armado</Value>
              <Value column="es_description">hormigón armado</Value>
            </Row>
            <Row>
              <Value column="id">2</Value>
              <Value column="description">albañilería (bloque cemento, piedra o ladrillo)</Value>
              <Value column="es_description">albañilería (bloque cemento, piedra o ladrillo)</Value>
            </Row>
            <Row>
              <Value column="id">3</Value>
              <Value column="description">tabique forrado por ambas caras (madera, acero, lata, u otro)</Value>
              <Value column="es_description">tabique forrado por ambas caras (madera, acero, lata, u otro)</Value>
            </Row>
            <Row>
              <Value column="id">4</Value>
              <Value column="description">tabique sin forro interior (madera u otro)</Value>
              <Value column="es_description">tabique sin forro interior (madera u otro)</Value>
            </Row>
            <Row>
              <Value column="id">5</Value>
              <Value column="description">adobe, barro, quincha, pirca u otro artesanal tradicional</Value>
              <Value column="es_description">adobe, barro, quincha, pirca u otro artesanal tradicional</Value>
            </Row>
            <Row>
              <Value column="id">6</Value>
              <Value column="description">materiales precarios o de desecho (cartón, latas, sacos, plásticos, etc.)</Value>
              <Value column="es_description">materiales precarios o de desecho (cartón, latas, sacos, plásticos, etc.)</Value>
            </Row>
            <Row>
              <Value column="id">7</Value>
              <Value column="description">No Data</Value>
              <Value column="es_description">sin dato</Value>
            </Row>
          </Rows>
        </InlineTable>
        
        <Level column="id" name="Walls Material" nameColumn="description" uniqueMembers="true">
          <Annotations>
            <Annotation name="es_caption">Description ES</Annotation>
          </Annotations>
          <Property column="es_description" name="Description ES"/>
        </Level>
      </Hierarchy>
    </Dimension>
    
    <Dimension foreignKey="floor_material" name="Floor Material">
      <Annotations>
        <Annotation name="es_element_caption">Material del piso</Annotation>
      </Annotations>
        
      <Hierarchy hasAll="true">
        
        <InlineTable alias="floor_material">
          <ColumnDefs>
            <ColumnDef name="id" type="Numeric"/>
            <ColumnDef name="description" type="String"/>
            <ColumnDef name="es_description" type="String"/>
          </ColumnDefs>
          <Rows>
            <Row>
              <Value column="id">1</Value>
              <Value column="description">parquet, madera, piso flotante o similar</Value>
              <Value column="es_description">parquet, madera, piso flotante o similar</Value>
            </Row>
            <Row>
              <Value column="id">2</Value>
              <Value column="description">cerรกmico, porcelanato, flexit o similar</Value>
              <Value column="es_description">cerรกmico, porcelanato, flexit o similar</Value>
            </Row>
            <Row>
              <Value column="id">3</Value>
              <Value column="description">alfombra o cubrepiso</Value>
              <Value column="es_description">alfombra o cubrepiso</Value>
            </Row>
            <Row>
              <Value column="id">4</Value>
              <Value column="description">baldosa de cemento</Value>
              <Value column="es_description">baldosa de cemento</Value>
            </Row>
            <Row>
              <Value column="id">5</Value>
              <Value column="description">radier</Value>
              <Value column="es_description">radier</Value>
            </Row>
            <Row>
              <Value column="id">6</Value>
              <Value column="description">tierra</Value>
              <Value column="es_description">tierra</Value>
            </Row>
            <Row>
              <Value column="id">7</Value>
              <Value column="description">No Data</Value>
              <Value column="es_description">sin dato</Value>
            </Row>
          </Rows>
        </InlineTable>
        
        <Level column="id" name="Floor Material" nameColumn="description" uniqueMembers="true">
          <Annotations>
            <Annotation name="es_caption">Description ES</Annotation>
          </Annotations>
          <Property column="es_description" name="Description ES"/>
        </Level>
      </Hierarchy>
    </Dimension>
    
    <Dimension foreignKey="ceiling_material" name="Ceiling Material">
      <Annotations>
        <Annotation name="es_element_caption">Material del techo</Annotation>
      </Annotations>
        
      <Hierarchy hasAll="true">
        
        <InlineTable alias="ceiling_material">
          <ColumnDefs>
            <ColumnDef name="id" type="Numeric"/>
            <ColumnDef name="description" type="String"/>
            <ColumnDef name="es_description" type="String"/>
          </ColumnDefs>
          <Rows>
            <Row>
              <Value column="id">1</Value>
              <Value column="description">tejas o tejuela (arcilla, metálica, cemento, madera, asfáltica)</Value>
              <Value column="es_description">tejas o tejuela (arcilla, metálica, cemento, madera, asfáltica)</Value>
            </Row>
            <Row>
              <Value column="id">2</Value>
              <Value column="description">losa hormigón</Value>
              <Value column="es_description">losa hormigón</Value>
            </Row>
            <Row>
              <Value column="id">3</Value>
              <Value column="description">planchas metálicas (zinc, cobre, etc.)</Value>
              <Value column="es_description">planchas metálicas (zinc, cobre, etc.)</Value>
            </Row>
            <Row>
              <Value column="id">4</Value>
              <Value column="description">planchas de fibrocemento (pizarreño)</Value>
              <Value column="es_description">planchas de fibrocemento (pizarreño)</Value>
            </Row>
            <Row>
              <Value column="id">5</Value>
              <Value column="description">fonolita o plancha de fieltro embreado</Value>
              <Value column="es_description">fonolita o plancha de fieltro embreado</Value>
            </Row>
            <Row>
              <Value column="id">6</Value>
              <Value column="description">paja, coirón, totora, caña</Value>
              <Value column="es_description">paja, coirón, totora, caña</Value>
            </Row>
            <Row>
              <Value column="id">7</Value>
              <Value column="description">materiales precarios o de desecho</Value>
              <Value column="es_description">materiales precarios o de desecho</Value>
            </Row>
            <Row>
              <Value column="id">8</Value>
              <Value column="description">sin cubierta en el techo</Value>
              <Value column="es_description">sin cubierta en el techo</Value>
            </Row>
            <Row>
              <Value column="id">9</Value>
              <Value column="description">No Data</Value>
              <Value column="es_description">sin dato</Value>
            </Row>
          </Rows>
        </InlineTable>
        
        <Level column="id" name="Ceiling Material" nameColumn="description" uniqueMembers="true">
          <Annotations>
            <Annotation name="es_caption">Description ES</Annotation>
          </Annotations>
          <Property column="es_description" name="Description ES"/>
        </Level>
      </Hierarchy>
    </Dimension>
    
    <Dimension foreignKey="households_in_land" name="Households In Land">
      <Annotations>
        <Annotation name="es_element_caption">Viviendas en el terreno</Annotation>
      </Annotations>
        
      <Hierarchy hasAll="true">
        
        <InlineTable alias="households_in_land">
          <ColumnDefs>
            <ColumnDef name="id" type="Numeric"/>
            <ColumnDef name="description" type="String"/>
            <ColumnDef name="es_description" type="String"/>
          </ColumnDefs>
          <Rows>
            <Row>
              <Value column="id">1</Value>
              <Value column="description">No Data</Value>
              <Value column="es_description">sin dato</Value>
            </Row>
          </Rows>
        </InlineTable>
        
        <Level column="id" name="Households In Land" nameColumn="description" uniqueMembers="true">
          <Annotations>
            <Annotation name="es_caption">Description ES</Annotation>
          </Annotations>
          <Property column="es_description" name="Description ES"/>
        </Level>
      </Hierarchy>
    </Dimension>
    
    <Dimension foreignKey="land_using" name="Land Using">
      <Annotations>
        <Annotation name="es_element_caption">Condición del terreno</Annotation>
      </Annotations>
        
      <Hierarchy hasAll="true">
        
        <InlineTable alias="land_using">
          <ColumnDefs>
            <ColumnDef name="id" type="Numeric"/>
            <ColumnDef name="description" type="String"/>
            <ColumnDef name="es_description" type="String"/>
          </ColumnDefs>
          <Rows>
            <Row>
              <Value column="id">1</Value>
              <Value column="description">propio pagado</Value>
              <Value column="es_description">propio pagado</Value>
            </Row>
            <Row>
              <Value column="id">2</Value>
              <Value column="description">propio pagándose</Value>
              <Value column="es_description">propio pagándose</Value>
            </Row>
            <Row>
              <Value column="id">3</Value>
              <Value column="description">propio compartido (pagado) con otras viviendas del sitio</Value>
              <Value column="es_description">propio compartido (pagado) con otras viviendas del sitio</Value>
            </Row>
            <Row>
              <Value column="id">4</Value>
              <Value column="description">propio compartido (pagándose) con otras viviendas del sitio</Value>
              <Value column="es_description">propio compartido (pagándose) con otras viviendas del sitio</Value>
            </Row>
            <Row>
              <Value column="id">5</Value>
              <Value column="description">arrendado con contrato</Value>
              <Value column="es_description">arrendado con contrato</Value>
            </Row>
            <Row>
              <Value column="id">6</Value>
              <Value column="description">arrendado sin contrato</Value>
              <Value column="es_description">arrendado sin contrato</Value>
            </Row>
            <Row>
              <Value column="id">7</Value>
              <Value column="description">cedido por servicio o trabajo</Value>
              <Value column="es_description">cedido por servicio o trabajo</Value>
            </Row>
            <Row>
              <Value column="id">8</Value>
              <Value column="description">cedido por familiar u otro</Value>
              <Value column="es_description">cedido por familiar u otro</Value>
            </Row>
            <Row>
              <Value column="id">9</Value>
              <Value column="description">usufructo (sólo uso y goce)</Value>
              <Value column="es_description">usufructo (sólo uso y goce)</Value>
            </Row>
            <Row>
              <Value column="id">10</Value>
              <Value column="description">ocupación irregular (de hecho)</Value>
              <Value column="es_description">ocupación irregular (de hecho)</Value>
            </Row>
            <Row>
              <Value column="id">11</Value>
              <Value column="description">poseedor irregular</Value>
              <Value column="es_description">poseedor irregular</Value>
            </Row>
            <Row>
              <Value column="id">12</Value>
              <Value column="description">No Data</Value>
              <Value column="es_description">sin dato</Value>
            </Row>
          </Rows>
        </InlineTable>
        
        <Level column="id" name="Land Using" nameColumn="description" uniqueMembers="true">
          <Annotations>
            <Annotation name="es_caption">Description ES</Annotation>
          </Annotations>
          <Property column="es_description" name="Description ES"/>
        </Level>
      </Hierarchy>
    </Dimension>
    
    <Dimension foreignKey="household_sq_meters" name="Household Sq Meters">
      <Annotations>
        <Annotation name="es_element_caption">Área construída de la vivienda</Annotation>
      </Annotations>
        
      <Hierarchy hasAll="true">
        
        <InlineTable alias="household_sq_meters">
          <ColumnDefs>
            <ColumnDef name="id" type="Numeric"/>
            <ColumnDef name="description" type="String"/>
            <ColumnDef name="es_description" type="String"/>
          </ColumnDefs>
          <Rows>
            <Row>
              <Value column="id">1</Value>
              <Value column="description">Less than 30 m²</Value>
              <Value column="es_description">Menos de 30 m²</Value>
            </Row>
            <Row>
              <Value column="id">2</Value>
              <Value column="description">30 to 40 m²</Value>
              <Value column="es_description">30 a 40 m²</Value>
            </Row>
            <Row>
              <Value column="id">3</Value>
              <Value column="description">41 to 60 m²</Value>
              <Value column="es_description">41 a 60 m²</Value>
            </Row>
            <Row>
              <Value column="id">4</Value>
              <Value column="description">61 to 100 m²</Value>
              <Value column="es_description">61 a 100 m²</Value>
            </Row>
            <Row>
              <Value column="id">5</Value>
              <Value column="description">101 to 150 m²</Value>
              <Value column="es_description">101 a 150 m²</Value>
            </Row>
            <Row>
              <Value column="id">6</Value>
              <Value column="description">More than 150 m²</Value>
              <Value column="es_description">más de 150 m²</Value>
            </Row>
            <Row>
              <Value column="id">7</Value>
              <Value column="description">Don't know</Value>
              <Value column="es_description">no sabe</Value>
            </Row>
          </Rows>
        </InlineTable>
        
        <Level column="id" name="Household Sq Meters" nameColumn="description" uniqueMembers="true">
          <Annotations>
            <Annotation name="es_caption">Description ES</Annotation>
          </Annotations>
          <Property column="es_description" name="Description ES"/>
        </Level>
      </Hierarchy>
    </Dimension>
    
    <Dimension foreignKey="household_using" name="Household Using">
      <Annotations>
        <Annotation name="es_element_caption">Condición de la vivienda</Annotation>
      </Annotations>
        
      <Hierarchy hasAll="true">
        
        <InlineTable alias="household_using">
          <ColumnDefs>
            <ColumnDef name="id" type="Numeric"/>
            <ColumnDef name="description" type="String"/>
            <ColumnDef name="es_description" type="String"/>
          </ColumnDefs>
          <Rows>
            <Row>
              <Value column="id">1</Value>
              <Value column="description">propia pagada</Value>
              <Value column="es_description">propia pagada</Value>
            </Row>
            <Row>
              <Value column="id">2</Value>
              <Value column="description">propia pagándose</Value>
              <Value column="es_description">propia pagándose</Value>
            </Row>
            <Row>
              <Value column="id">3</Value>
              <Value column="description">propia compartida (pagada) con otros hogares de la vivienda</Value>
              <Value column="es_description">propia compartida (pagada) con otros hogares de la vivienda</Value>
            </Row>
            <Row>
              <Value column="id">4</Value>
              <Value column="description">propia compartida (pagándose) con otros hogares de la vivienda</Value>
              <Value column="es_description">propia compartida (pagándose) con otros hogares de la vivienda</Value>
            </Row>
            <Row>
              <Value column="id">5</Value>
              <Value column="description">arrendada con contrato</Value>
              <Value column="es_description">arrendada con contrato</Value>
            </Row>
            <Row>
              <Value column="id">6</Value>
              <Value column="description">arrendada sin contrato</Value>
              <Value column="es_description">arrendada sin contrato</Value>
            </Row>
            <Row>
              <Value column="id">7</Value>
              <Value column="description">cedida por servicio o trabajo</Value>
              <Value column="es_description">cedida por servicio o trabajo</Value>
            </Row>
            <Row>
              <Value column="id">8</Value>
              <Value column="description">cedida por familiar u otro</Value>
              <Value column="es_description">cedida por familiar u otro</Value>
            </Row>
            <Row>
              <Value column="id">9</Value>
              <Value column="description">usufructo (sólo uso y goce)</Value>
              <Value column="es_description">usufructo (sólo uso y goce)</Value>
            </Row>
            <Row>
              <Value column="id">10</Value>
              <Value column="description">ocupación irregular (de hecho)</Value>
              <Value column="es_description">ocupación irregular (de hecho)</Value>
            </Row>
            <Row>
              <Value column="id">11</Value>
              <Value column="description">poseedor irregular</Value>
              <Value column="es_description">poseedor irregular</Value>
            </Row>
            <Row>
              <Value column="id">12</Value>
              <Value column="description">No Data</Value>
              <Value column="es_description">sin dato</Value>
            </Row>
          </Rows>
        </InlineTable>
        
        <Level column="id" name="Household Using" nameColumn="description" uniqueMembers="true">
          <Annotations>
            <Annotation name="es_caption">Description ES</Annotation>
          </Annotations>
          <Property column="es_description" name="Description ES"/>
        </Level>
      </Hierarchy>
    </Dimension>
    
    <Dimension foreignKey="family_member_owner" name="Family Member Owner">
      <Annotations>
        <Annotation name="es_element_caption">Miembro familiar es dueño</Annotation>
      </Annotations>
        
      <Hierarchy hasAll="true">
        
        <InlineTable alias="family_member_owner">
          <ColumnDefs>
            <ColumnDef name="id" type="Numeric"/>
            <ColumnDef name="description" type="String"/>
            <ColumnDef name="es_description" type="String"/>
          </ColumnDefs>
          <Rows>
            <Row>
              <Value column="id">1</Value>
              <Value column="description">Yes</Value>
              <Value column="es_description">sí</Value>
            </Row>
            <Row>
              <Value column="id">2</Value>
              <Value column="description">No</Value>
              <Value column="es_description">no</Value>
            </Row>
            <Row>
              <Value column="id">3</Value>
              <Value column="description">No Data</Value>
              <Value column="es_description">sin dato</Value>
            </Row>
          </Rows>
        </InlineTable>
        
        <Level column="id" name="Family Member Owner" nameColumn="description" uniqueMembers="true">
          <Annotations>
            <Annotation name="es_caption">Description ES</Annotation>
          </Annotations>
          <Property column="es_description" name="Description ES"/>
        </Level>
      </Hierarchy>
    </Dimension>
    
    <Dimension foreignKey="family_member_owner_2" name="Family Member Owner 2">
      <Annotations>
        <Annotation name="es_element_caption">Miembro familiar dueño</Annotation>
      </Annotations>
        
      <Hierarchy hasAll="true">
        
        <InlineTable alias="family_member_owner_2">
          <ColumnDefs>
            <ColumnDef name="id" type="Numeric"/>
            <ColumnDef name="description" type="String"/>
            <ColumnDef name="es_description" type="String"/>
          </ColumnDefs>
          <Rows>
            <Row>
              <Value column="id">1</Value>
              <Value column="description">Head of household</Value>
              <Value column="es_description">jefe(a) del hogar</Value>
            </Row>
            <Row>
              <Value column="id">2</Value>
              <Value column="description">Spouse</Value>
              <Value column="es_description">Cónyuge</Value>
            </Row>
            <Row>
              <Value column="id">3</Value>
              <Value column="description">Partner</Value>
              <Value column="es_description">conviviente o pareja</Value>
            </Row>
            <Row>
              <Value column="id">4</Value>
              <Value column="description">Child or stepchild</Value>
              <Value column="es_description">hijo(a)</Value>
            </Row>
            <Row>
              <Value column="id">5</Value>
              <Value column="description">Other relative</Value>
              <Value column="es_description">otro pariente</Value>
            </Row>
            <Row>
              <Value column="id">6</Value>
              <Value column="description">Non-relative</Value>
              <Value column="es_description">otro no pariente</Value>
            </Row>
            <Row>
              <Value column="id">7</Value>
              <Value column="description">Head of household and partner</Value>
              <Value column="es_description">jefe(a) y cรณnyuge</Value>
            </Row>
            <Row>
              <Value column="id">8</Value>
              <Value column="description">Head of household and other relative</Value>
              <Value column="es_description">jefe(a) y otro pariente</Value>
            </Row>
            <Row>
              <Value column="id">9</Value>
              <Value column="description">No Data</Value>
              <Value column="es_description">sin dato</Value>
            </Row>
          </Rows>
        </InlineTable>
        
        <Level column="id" name="Family Member Owner 2" nameColumn="description" uniqueMembers="true">
          <Annotations>
            <Annotation name="es_caption">Description ES</Annotation>
          </Annotations>
          <Property column="es_description" name="Description ES"/>
        </Level>
      </Hierarchy>
    </Dimension>
    
    <Dimension foreignKey="subsidy_or_program" name="Subsidy Or Program">
      <Annotations>
        <Annotation name="es_element_caption">Subsidio o programa</Annotation>
      </Annotations>
        
      <Hierarchy hasAll="true">
        
        <InlineTable alias="subsidy_or_program">
          <ColumnDefs>
            <ColumnDef name="id" type="Numeric"/>
            <ColumnDef name="description" type="String"/>
            <ColumnDef name="es_description" type="String"/>
          </ColumnDefs>
          <Rows>
            <Row>
              <Value column="id">1</Value>
              <Value column="description">sí, con subsidio habitacional (sin crédito)</Value>
              <Value column="es_description">sí, con subsidio habitacional (sin crédito)</Value>
            </Row>
            <Row>
              <Value column="id">2</Value>
              <Value column="description">sí, con subsidio habitacional y crédito</Value>
              <Value column="es_description">sí, con subsidio habitacional y crédito</Value>
            </Row>
            <Row>
              <Value column="id">3</Value>
              <Value column="description">no, sílo con recursos propios</Value>
              <Value column="es_description">no, sílo con recursos propios</Value>
            </Row>
            <Row>
              <Value column="id">4</Value>
              <Value column="description">no, la recibí de herencia o traspaso gratuito</Value>
              <Value column="es_description">no, la recibí de herencia o traspaso gratuito</Value>
            </Row>
            <Row>
              <Value column="id">5</Value>
              <Value column="description">No Data</Value>
              <Value column="es_description">sin dato</Value>
            </Row>
          </Rows>
        </InlineTable>
        
        <Level column="id" name="Subsidy Or Program" nameColumn="description" uniqueMembers="true">
          <Annotations>
            <Annotation name="es_caption">Description ES</Annotation>
          </Annotations>
          <Property column="es_description" name="Description ES"/>
        </Level>
      </Hierarchy>
    </Dimension>
    
    <Dimension foreignKey="credit" name="Credit">
      <Annotations>
        <Annotation name="es_element_caption">Financiamiento hipotecario</Annotation>
      </Annotations>
        
      <Hierarchy hasAll="true">
        
        <InlineTable alias="credit">
          <ColumnDefs>
            <ColumnDef name="id" type="Numeric"/>
            <ColumnDef name="description" type="String"/>
            <ColumnDef name="es_description" type="String"/>
          </ColumnDefs>
          <Rows>
            <Row>
              <Value column="id">1</Value>
              <Value column="description">sí, serviu (sílo viviendas adquiridas desde 1977 hasta 2001)</Value>
              <Value column="es_description">sí, serviu (sílo viviendas adquiridas desde 1977 hasta 2001)</Value>
            </Row>
            <Row>
              <Value column="id">2</Value>
              <Value column="description">sí, banco estado</Value>
              <Value column="es_description">sí, banco estado</Value>
            </Row>
            <Row>
              <Value column="id">3</Value>
              <Value column="description">sí, banco privado</Value>
              <Value column="es_description">sí, banco privado</Value>
            </Row>
            <Row>
              <Value column="id">4</Value>
              <Value column="description">sí, cooperativa</Value>
              <Value column="es_description">sí, cooperativa</Value>
            </Row>
            <Row>
              <Value column="id">5</Value>
              <Value column="description">sí, financiera u otra institución</Value>
              <Value column="es_description">sí, financiera u otra institución</Value>
            </Row>
            <Row>
              <Value column="id">6</Value>
              <Value column="description">no, sin crédito hipotecario</Value>
              <Value column="es_description">no, sin crédito hipotecario</Value>
            </Row>
            <Row>
              <Value column="id">7</Value>
              <Value column="description">No Data</Value>
              <Value column="es_description">sin dato</Value>
            </Row>
          </Rows>
        </InlineTable>
        
        <Level column="id" name="Credit" nameColumn="description" uniqueMembers="true">
          <Annotations>
            <Annotation name="es_caption">Description ES</Annotation>
          </Annotations>
          <Property column="es_description" name="Description ES"/>
        </Level>
      </Hierarchy>
    </Dimension>
    
    <Dimension foreignKey="paying_credit" name="Paying Credit">
      <Annotations>
        <Annotation name="es_element_caption">Estado del pago hipotecario</Annotation>
      </Annotations>
        
      <Hierarchy hasAll="true">
        
        <InlineTable alias="paying_credit">
          <ColumnDefs>
            <ColumnDef name="id" type="Numeric"/>
            <ColumnDef name="description" type="String"/>
            <ColumnDef name="es_description" type="String"/>
          </ColumnDefs>
          <Rows>
            <Row>
              <Value column="id">1</Value>
              <Value column="description">sí, está pagando al día sus dividendos</Value>
              <Value column="es_description">sí, está pagando al día sus dividendos</Value>
            </Row>
            <Row>
              <Value column="id">2</Value>
              <Value column="description">sí, está pagando con atraso sus dividendos</Value>
              <Value column="es_description">sí, está pagando con atraso sus dividendos</Value>
            </Row>
            <Row>
              <Value column="id">3</Value>
              <Value column="description">no está pagando, aunque tiene deuda pendiente</Value>
              <Value column="es_description">no está pagando, aunque tiene deuda pendiente</Value>
            </Row>
            <Row>
              <Value column="id">4</Value>
              <Value column="description">no está pagando, terminó de pagar</Value>
              <Value column="es_description">no está pagando, terminó de pagar</Value>
            </Row>
            <Row>
              <Value column="id">5</Value>
              <Value column="description">No Data</Value>
              <Value column="es_description">sin dato</Value>
            </Row>
          </Rows>
        </InlineTable>
        
        <Level column="id" name="Paying Credit" nameColumn="description" uniqueMembers="true">
          <Annotations>
            <Annotation name="es_caption">Description ES</Annotation>
          </Annotations>
          <Property column="es_description" name="Description ES"/>
        </Level>
      </Hierarchy>
    </Dimension>
    
    <Dimension foreignKey="water_source" name="Water Source">
      <Annotations>
        <Annotation name="es_element_caption">Fuente del agua</Annotation>
      </Annotations>
        
      <Hierarchy hasAll="true">
        
        <InlineTable alias="water_source">
          <ColumnDefs>
            <ColumnDef name="id" type="Numeric"/>
            <ColumnDef name="description" type="String"/>
            <ColumnDef name="es_description" type="String"/>
          </ColumnDefs>
          <Rows>
            <Row>
              <Value column="id">1</Value>
              <Value column="description">red pública con medidor propio</Value>
              <Value column="es_description">red pública con medidor propio</Value>
            </Row>
            <Row>
              <Value column="id">2</Value>
              <Value column="description">red pública con medidor compartido</Value>
              <Value column="es_description">red pública con medidor compartido</Value>
            </Row>
            <Row>
              <Value column="id">3</Value>
              <Value column="description">red pública sin medidor</Value>
              <Value column="es_description">red pública sin medidor</Value>
            </Row>
            <Row>
              <Value column="id">4</Value>
              <Value column="description">pozo o noria</Value>
              <Value column="es_description">pozo o noria</Value>
            </Row>
            <Row>
              <Value column="id">5</Value>
              <Value column="description">río, vertiente, lago o estero</Value>
              <Value column="es_description">río, vertiente, lago o estero</Value>
            </Row>
            <Row>
              <Value column="id">6</Value>
              <Value column="description">camión aljibe</Value>
              <Value column="es_description">camión aljibe</Value>
            </Row>
            <Row>
              <Value column="id">7</Value>
              <Value column="description">otra fuente.</Value>
              <Value column="es_description">otra fuente.</Value>
            </Row>
            <Row>
              <Value column="id">8</Value>
              <Value column="description">No Data</Value>
              <Value column="es_description">sin dato</Value>
            </Row>
          </Rows>
        </InlineTable>
        
        <Level column="id" name="Water Source" nameColumn="description" uniqueMembers="true">
          <Annotations>
            <Annotation name="es_caption">Description ES</Annotation>
          </Annotations>
          <Property column="es_description" name="Description ES"/>
        </Level>
      </Hierarchy>
    </Dimension>
    
    <Dimension foreignKey="water_distribution" name="Water Distribution">
      <Annotations>
        <Annotation name="es_element_caption">Distribución del agua</Annotation>
      </Annotations>
        
      <Hierarchy hasAll="true">
        
        <InlineTable alias="water_distribution">
          <ColumnDefs>
            <ColumnDef name="id" type="Numeric"/>
            <ColumnDef name="description" type="String"/>
            <ColumnDef name="es_description" type="String"/>
          </ColumnDefs>
          <Rows>
            <Row>
              <Value column="id">1</Value>
              <Value column="description">con llave dentro de la vivienda</Value>
              <Value column="es_description">con llave dentro de la vivienda</Value>
            </Row>
            <Row>
              <Value column="id">2</Value>
              <Value column="description">con llave dentro del sitio, pero fuera de la vivienda</Value>
              <Value column="es_description">con llave dentro del sitio, pero fuera de la vivienda</Value>
            </Row>
            <Row>
              <Value column="id">3</Value>
              <Value column="description">no tiene sistema, la acarrea</Value>
              <Value column="es_description">no tiene sistema, la acarrea</Value>
            </Row>
            <Row>
              <Value column="id">4</Value>
              <Value column="description">No Data</Value>
              <Value column="es_description">sin dato</Value>
            </Row>
          </Rows>
        </InlineTable>
        
        <Level column="id" name="Water Distribution" nameColumn="description" uniqueMembers="true">
          <Annotations>
            <Annotation name="es_caption">Description ES</Annotation>
          </Annotations>
          <Property column="es_description" name="Description ES"/>
        </Level>
      </Hierarchy>
    </Dimension>
    
    <Dimension foreignKey="waste_disposal" name="Waste Disposal">
      <Annotations>
        <Annotation name="es_element_caption">Eliminación de desechos</Annotation>
      </Annotations>
        
      <Hierarchy hasAll="true">
        
        <InlineTable alias="waste_disposal">
          <ColumnDefs>
            <ColumnDef name="id" type="Numeric"/>
            <ColumnDef name="description" type="String"/>
            <ColumnDef name="es_description" type="String"/>
          </ColumnDefs>
          <Rows>
            <Row>
              <Value column="id">1</Value>
              <Value column="description">sí, con wc conectado al alcantarillado</Value>
              <Value column="es_description">sí, con wc conectado al alcantarillado</Value>
            </Row>
            <Row>
              <Value column="id">2</Value>
              <Value column="description">sí, con wc conectado a fosa séptica</Value>
              <Value column="es_description">sí, con wc conectado a fosa séptica</Value>
            </Row>
            <Row>
              <Value column="id">3</Value>
              <Value column="description">sí, con letrina sanitaria conectada a pozo negro</Value>
              <Value column="es_description">sí, con letrina sanitaria conectada a pozo negro</Value>
            </Row>
            <Row>
              <Value column="id">4</Value>
              <Value column="description">sí, con cajón sobre pozo negro</Value>
              <Value column="es_description">sí, con cajón sobre pozo negro</Value>
            </Row>
            <Row>
              <Value column="id">5</Value>
              <Value column="description">sí, con cajón sobre acequia o canal</Value>
              <Value column="es_description">sí, con cajón sobre acequia o canal</Value>
            </Row>
            <Row>
              <Value column="id">6</Value>
              <Value column="description">sí, con cajón conectado a otro sistema</Value>
              <Value column="es_description">sí, con cajón conectado a otro sistema</Value>
            </Row>
            <Row>
              <Value column="id">7</Value>
              <Value column="description">sí, con baño químico dentro del sitio</Value>
              <Value column="es_description">sí, con baño químico dentro del sitio</Value>
            </Row>
            <Row>
              <Value column="id">8</Value>
              <Value column="description">no dispone de sistema</Value>
              <Value column="es_description">no dispone de sistema</Value>
            </Row>
            <Row>
              <Value column="id">9</Value>
              <Value column="description">No Data</Value>
              <Value column="es_description">sin dato</Value>
            </Row>
          </Rows>
        </InlineTable>
        
        <Level column="id" name="Waste Disposal" nameColumn="description" uniqueMembers="true">
          <Annotations>
            <Annotation name="es_caption">Description ES</Annotation>
          </Annotations>
          <Property column="es_description" name="Description ES"/>
        </Level>
      </Hierarchy>
    </Dimension>
    
    <Dimension foreignKey="electricity" name="Electricity">
      <Annotations>
        <Annotation name="es_element_caption">Fuente de electricidad</Annotation>
      </Annotations>
        
      <Hierarchy hasAll="true">
        
        <InlineTable alias="electricity">
          <ColumnDefs>
            <ColumnDef name="id" type="Numeric"/>
            <ColumnDef name="description" type="String"/>
            <ColumnDef name="es_description" type="String"/>
          </ColumnDefs>
          <Rows>
            <Row>
              <Value column="id">1</Value>
              <Value column="description">sí, de la red pública con medidor propio</Value>
              <Value column="es_description">sí, de la red pública con medidor propio</Value>
            </Row>
            <Row>
              <Value column="id">2</Value>
              <Value column="description">sí, de la red pública con medidor compartido</Value>
              <Value column="es_description">sí, de la red pública con medidor compartido</Value>
            </Row>
            <Row>
              <Value column="id">3</Value>
              <Value column="description">sí, de la red pública sin medidor</Value>
              <Value column="es_description">sí, de la red pública sin medidor</Value>
            </Row>
            <Row>
              <Value column="id">4</Value>
              <Value column="description">sí, de un generador propio o comunitario</Value>
              <Value column="es_description">sí, de un generador propio o comunitario</Value>
            </Row>
            <Row>
              <Value column="id">5</Value>
              <Value column="description">sí, a través de placa solar</Value>
              <Value column="es_description">sí, a través de placa solar</Value>
            </Row>
            <Row>
              <Value column="id">6</Value>
              <Value column="description">sí, de otra fuente. especifique</Value>
              <Value column="es_description">sí, de otra fuente. especifique</Value>
            </Row>
            <Row>
              <Value column="id">7</Value>
              <Value column="description">no dispone de energía eléctrica</Value>
              <Value column="es_description">no dispone de energía eléctrica</Value>
            </Row>
            <Row>
              <Value column="id">8</Value>
              <Value column="description">ns/nr</Value>
              <Value column="es_description">ns/nr</Value>
            </Row>
          </Rows>
        </InlineTable>
        
        <Level column="id" name="Electricity" nameColumn="description" uniqueMembers="true">
          <Annotations>
            <Annotation name="es_caption">Description ES</Annotation>
          </Annotations>
          <Property column="es_description" name="Description ES"/>
        </Level>
      </Hierarchy>
    </Dimension>
    
    <Dimension foreignKey="rooms" name="Rooms">
      <Annotations>
        <Annotation name="es_element_caption">Habitaciones</Annotation>
      </Annotations>
        
      <Hierarchy hasAll="true">
        
        <InlineTable alias="rooms">
          <ColumnDefs>
            <ColumnDef name="id" type="Numeric"/>
            <ColumnDef name="description" type="String"/>
            <ColumnDef name="es_description" type="String"/>
          </ColumnDefs>
          <Rows>
            <Row>
              <Value column="id">1</Value>
              <Value column="description">No Data</Value>
              <Value column="es_description">sin dato</Value>
            </Row>
          </Rows>
        </InlineTable>
        
        <Level column="id" name="Rooms" nameColumn="description" uniqueMembers="true">
          <Annotations>
            <Annotation name="es_caption">Description ES</Annotation>
          </Annotations>
          <Property column="es_description" name="Description ES"/>
        </Level>
      </Hierarchy>
    </Dimension>
    
    <Dimension foreignKey="bathrooms" name="Bathrooms">
      <Annotations>
        <Annotation name="es_element_caption">Baños</Annotation>
      </Annotations>
        
      <Hierarchy hasAll="true">
        
        <InlineTable alias="bathrooms">
          <ColumnDefs>
            <ColumnDef name="id" type="Numeric"/>
            <ColumnDef name="description" type="String"/>
            <ColumnDef name="es_description" type="String"/>
          </ColumnDefs>
          <Rows>
            <Row>
              <Value column="id">1</Value>
              <Value column="description">No Data</Value>
              <Value column="es_description">sin dato</Value>
            </Row>
          </Rows>
        </InlineTable>
        
        <Level column="id" name="Bathrooms" nameColumn="description" uniqueMembers="true">
          <Annotations>
            <Annotation name="es_caption">Description ES</Annotation>
          </Annotations>
          <Property column="es_description" name="Description ES"/>
        </Level>
      </Hierarchy>
    </Dimension>
    
    <Dimension foreignKey="families_in_household" name="Families In Household">
      <Annotations>
        <Annotation name="es_element_caption">Familias en la vivienda</Annotation>
      </Annotations>
        
      <Hierarchy hasAll="true">
        
        <InlineTable alias="families_in_household">
          <ColumnDefs>
            <ColumnDef name="id" type="Numeric"/>
            <ColumnDef name="description" type="String"/>
            <ColumnDef name="es_description" type="String"/>
          </ColumnDefs>
          <Rows>
            <Row>
              <Value column="id">1</Value>
              <Value column="description">No Data</Value>
              <Value column="es_description">sin dato</Value>
            </Row>
          </Rows>
        </InlineTable>
        
        <Level column="id" name="Families In Household" nameColumn="description" uniqueMembers="true">
          <Annotations>
            <Annotation name="es_caption">Description ES</Annotation>
          </Annotations>
          <Property column="es_description" name="Description ES"/>
        </Level>
      </Hierarchy>
    </Dimension>
    
    <Dimension foreignKey="reason_to_share" name="Reason To Share">
      <Annotations>
        <Annotation name="es_element_caption">Motivo del allegamiento</Annotation>
      </Annotations>
        
      <Hierarchy hasAll="true">
        
        <InlineTable alias="reason_to_share">
          <ColumnDefs>
            <ColumnDef name="id" type="Numeric"/>
            <ColumnDef name="description" type="String"/>
            <ColumnDef name="es_description" type="String"/>
          </ColumnDefs>
          <Rows>
            <Row>
              <Value column="id">1</Value>
              <Value column="description">cuidar niños, enfermos, ancianos o personas con discapacidad</Value>
              <Value column="es_description">cuidar niños, enfermos, ancianos o personas con discapacidad</Value>
            </Row>
            <Row>
              <Value column="id">2</Value>
              <Value column="description">razones económicas</Value>
              <Value column="es_description">razones económicas</Value>
            </Row>
            <Row>
              <Value column="id">3</Value>
              <Value column="description">razones de estudio</Value>
              <Value column="es_description">razones de estudio</Value>
            </Row>
            <Row>
              <Value column="id">4</Value>
              <Value column="description">razones laborales</Value>
              <Value column="es_description">razones laborales</Value>
            </Row>
            <Row>
              <Value column="id">5</Value>
              <Value column="description">por emergencia</Value>
              <Value column="es_description">por emergencia</Value>
            </Row>
            <Row>
              <Value column="id">6</Value>
              <Value column="description">prefiere vivir así o se siente cómodo</Value>
              <Value column="es_description">prefiere vivir así o se siente cómodo</Value>
            </Row>
            <Row>
              <Value column="id">7</Value>
              <Value column="description">costumbre o tradición familiar</Value>
              <Value column="es_description">costumbre o tradición familiar</Value>
            </Row>
            <Row>
              <Value column="id">8</Value>
              <Value column="description">otra. especifique</Value>
              <Value column="es_description">otra. especifique</Value>
            </Row>
            <Row>
              <Value column="id">9</Value>
              <Value column="description">No Data</Value>
              <Value column="es_description">sin dato</Value>
            </Row>
          </Rows>
        </InlineTable>
        
        <Level column="id" name="Reason To Share" nameColumn="description" uniqueMembers="true">
          <Annotations>
            <Annotation name="es_caption">Description ES</Annotation>
          </Annotations>
          <Property column="es_description" name="Description ES"/>
        </Level>
      </Hierarchy>
    </Dimension>
    
    <!-- Energy Source Survey Response -->
    <DimensionUsage caption="Cooking Energy Source" foreignKey="cooking_energy_source" name="Cooking Energy Source" source="Energy Source Survey Response"/>
    <DimensionUsage caption="Heating Energy Source" foreignKey="heating_energy_source" name="Heating Energy Source" source="Energy Source Survey Response"/>
    <DimensionUsage caption="Hot Water Energy Source" foreignKey="hot_water_energy_source" name="Hot Water Energy Source" source="Energy Source Survey Response"/>

    <!-- Binary Survey Response -->
    <DimensionUsage caption="Less Than 8 Blocks Public Transport" foreignKey="less_than_8_blocks_public_transport" name="Less Than 8 Blocks Public Transport" source="Binary Survey Response"/>
    <DimensionUsage caption="Less Than 20 Blocks Educational Center" foreignKey="less_than_20_blocks_educational_center" name="Less Than 20 Blocks Educational Center" source="Binary Survey Response"/>
    <DimensionUsage caption="Less Than 20 Blocks Health Center" foreignKey="less_than_20_blocks_health_center" name="Less Than 20 Blocks Health Center" source="Binary Survey Response"/>
    <DimensionUsage caption="Less Than 20 Blocks Market" foreignKey="less_than_20_blocks_market" name="Less Than 20 Blocks Market" source="Binary Survey Response"/>
    <DimensionUsage caption="Less Than 20 Blocks Atm" foreignKey="less_than_20_blocks_atm" name="Less Than 20 Blocks Atm" source="Binary Survey Response"/>
    <DimensionUsage caption="Less Than 20 Blocks Sports Center" foreignKey="less_than_20_blocks_sports_center" name="Less Than 20 Blocks Sports Center" source="Binary Survey Response"/>
    <DimensionUsage caption="Less Than 20 Blocks Green Areas" foreignKey="less_than_20_blocks_green_areas" name="Less Than 20 Blocks Green Areas" source="Binary Survey Response"/>
    <DimensionUsage caption="Less Than 20 Blocks Community Equipment" foreignKey="less_than_20_blocks_community_equipment" name="Less Than 20 Blocks Community Equipment" source="Binary Survey Response"/>
    <DimensionUsage caption="Less Than 20 Blocks Pharmacy" foreignKey="less_than_20_blocks_pharmacy" name="Less Than 20 Blocks Pharmacy" source="Binary Survey Response"/>

    <!-- Frequency Survey Response -->
    <DimensionUsage caption="Affected By Acoustic Contamination" foreignKey="affected_by_acoustic_contamination" name="Affected By Acoustic Contamination" source="Frequency Survey Response"/>
    <DimensionUsage caption="Affected By Air Contamination" foreignKey="affected_by_air_contamination" name="Affected By Air Contamination" source="Frequency Survey Response"/>
    <DimensionUsage caption="Affected By River Or Lake Contamination" foreignKey="affected_by_river_or_lake_contamination" name="Affected By River Or Lake Contamination" source="Frequency Survey Response"/>
    <DimensionUsage caption="Affected By Public Water Source Contamination" foreignKey="affected_by_public_water_source_contamination" name="Affected By Public Water Source Contamination" source="Frequency Survey Response"/>
    <DimensionUsage caption="Affected By Graffitis Or Advertising" foreignKey="affected_by_graffitis_or_advertising" name="Affected By Graffitis Or Advertising" source="Frequency Survey Response"/>
    <DimensionUsage caption="Affected By Accumulation Of Trash Public Areas" foreignKey="affected_by_accumulation_of_trash_public_areas" name="Affected By Accumulation Of Trash Public Areas" source="Frequency Survey Response"/>
    <DimensionUsage caption="Affected By Animal Or Insect Plague" foreignKey="affected_by_animal_or_insect_plague" name="Affected By Animal Or Insect Plague" source="Frequency Survey Response"/>

    <!-- Mesaures -->
    <Measure aggregator="count" column="date_id" name="Number of records" visible="true"/>
    <Measure aggregator="sum" column="expr" name="Expansion Factor Region" visible="true"/>
    <Measure aggregator="sum" column="expc" name="Expansion Factor Comuna" visible="true"/>

    <CalculatedMember dimension="Measures" name="Expansion Factor">
      <Annotations>
        <Annotation name="es_element_caption">Vivienda: Factor de expansión</Annotation>
        <Annotation name="es_format">XXX</Annotation>
      </Annotations>
      <Formula>
        <![CDATA[IIF(Geography.CurrentMember.Level.Name = "Comuna",
                    [Measures].[Expansion Factor Comuna],
                    [Measures].[Expansion Factor Region])]]>
      </Formula>
    </CalculatedMember>
  </Cube>

  <!-- / CASEN household data cube -->

  <!-- Population data cube -->

  <Cube name="population_estimate">
    <Annotations>
      <Annotation name="source_name">INE - Demográficas y Vitales</Annotation>
      <Annotation name="source_link">http://www.ine.cl/estadisticas/demograficas-y-vitales</Annotation>
      <Annotation name="topic">demography</Annotation>
    </Annotations>

    <!-- http://www.ine.cl/estadisticas/demograficas-y-vitales -->
    <Table name="fact_population_estimate" schema="demographics"/>
    
    <Dimension name="Date">
      <Hierarchy hasAll="true">
        <Level column="year" nameColumn="year" name="Year" uniqueMembers="true"/>
      </Hierarchy>
    </Dimension>

    <DimensionUsage foreignKey="comuna_datachile_id" name="Geography" source="Geography"/>
    <DimensionUsage foreignKey="sex_id" name="Sex" source="Sex"/>

    <Dimension foreignKey="age_range_id" name="Age Range">
      <Annotations>
        <Annotation name="es_element_caption">Rango etario</Annotation>
      </Annotations>
        
      <Hierarchy hasAll="true">
        <InlineTable alias="age_range">
          <ColumnDefs>
            <ColumnDef name="id" type="Numeric"/>
            <ColumnDef name="description" type="String"/>
            <ColumnDef name="es_description" type="String"/>
          </ColumnDefs>
          <Rows>
            <Row>
              <Value column="id">1</Value>
              <Value column="description">age_0_4</Value>
              <Value column="es_description">age_0_4</Value>
            </Row>
            <Row>
              <Value column="id">2</Value>
              <Value column="description">age_5_9</Value>
              <Value column="es_description">age_5_9</Value>
            </Row>
            <Row>
              <Value column="id">3</Value>
              <Value column="description">age_10_14</Value>
              <Value column="es_description">age_10_14</Value>
            </Row>
            <Row>
              <Value column="id">4</Value>
              <Value column="description">age_15_19</Value>
              <Value column="es_description">age_15_19</Value>
            </Row>
            <Row>
              <Value column="id">5</Value>
              <Value column="description">age_20_24</Value>
              <Value column="es_description">age_20_24</Value>
            </Row>
            <Row>
              <Value column="id">6</Value>
              <Value column="description">age_25_29</Value>
              <Value column="es_description">age_25_29</Value>
            </Row>
            <Row>
              <Value column="id">7</Value>
              <Value column="description">30 to 34</Value>
              <Value column="es_description">30 a 34</Value>
            </Row>
            <Row>
              <Value column="id">8</Value>
              <Value column="description">35 to 39</Value>
              <Value column="es_description">35 a 39</Value>
            </Row>
            <Row>
              <Value column="id">9</Value>
              <Value column="description">40 to 44</Value>
              <Value column="es_description">40 a 44</Value>
            </Row>
            <Row>
              <Value column="id">10</Value>
              <Value column="description">45 to 49</Value>
              <Value column="es_description">45 a 49</Value>
            </Row>
            <Row>
              <Value column="id">11</Value>
              <Value column="description">50 to 54</Value>
              <Value column="es_description">50 a 54</Value>
            </Row>
            <Row>
              <Value column="id">12</Value>
              <Value column="description">55 to 59</Value>
              <Value column="es_description">55 a 59</Value>
            </Row>
            <Row>
              <Value column="id">13</Value>
              <Value column="description">60 to 64</Value>
              <Value column="es_description">60 a 64</Value>
            </Row>
            <Row>
              <Value column="id">14</Value>
              <Value column="description">65 to 69</Value>
              <Value column="es_description">65 a 69</Value>
            </Row>
            <Row>
              <Value column="id">15</Value>
              <Value column="description">70 to 74</Value>
              <Value column="es_description">70 a 74</Value>
            </Row>
            <Row>
              <Value column="id">16</Value>
              <Value column="description">75 to 79</Value>
              <Value column="es_description">75 a 79</Value>
            </Row>
            <Row>
              <Value column="id">17</Value>
              <Value column="description">80 and older</Value>
              <Value column="es_description">80 y más</Value>
            </Row>
          </Rows>
        </InlineTable>
        
        <Level column="id" name="Age Range" nameColumn="description" uniqueMembers="true">
          <Annotations>
            <Annotation name="es_caption">Description ES</Annotation>
          </Annotations>
          <Property column="es_description" name="Description ES"/>
        </Level>
      </Hierarchy>
    </Dimension>

    <Measure aggregator="count" column="date_id" name="Number of records" visible="true"/>
    <Measure aggregator="sum" column="count" name="Population" visible="true">
      <Annotations>
        <Annotation name="es_element_caption">Proyecciones de Población (INE 2014 basado en Censo 2000)</Annotation>
        <Annotation name="es_format">XXX</Annotation>
      </Annotations>
    </Measure>
    <CalculatedMember dimension="Measures" name="Population Rank">
      <Formula>
        <![CDATA[Rank(Geography.CurrentMember,
                 Order(Geography.CurrentMember.Level.Members,
                 Measures.Population, BDESC))]]>
      </Formula>
    </CalculatedMember>

    <CalculatedMember dimension="Measures" name="Population Rank Decile" visible="true">
      <Formula>
        <![CDATA[((count(Geography.CurrentMember.Level.Members)-Measures.[Population Rank]+1) * 10) / count(Geography.CurrentMember.Level.Members)]]>
      </Formula>
    </CalculatedMember>

    <CalculatedMember dimension="Measures" name="Population Rank Total" visible="true">
      <Formula>
        <![CDATA[count(Geography.CurrentMember.Level.Members)]]>
      </Formula>
    </CalculatedMember>
    
  </Cube>

  <!-- / Population data cube -->

  <!-- Health CASEN data cube -->

  <Cube name="casen_health_system">
    <Annotations>
      <Annotation name="source_name">Encuesta CASEN</Annotation>
      <Annotation name="source_link">http://observatorio.ministeriodesarrollosocial.gob.cl/casen-multidimensional/casen/basedatos.php</Annotation>
      <Annotation name="topic">health</Annotation>
    </Annotations>

    <Table name="fact_health_system_casen" schema="health"/>
    
    <Dimension name="Date">
      <Hierarchy hasAll="true">
        <Level column="year" nameColumn="year" name="Year" uniqueMembers="true"/>
      </Hierarchy>
    </Dimension>
    <DimensionUsage foreignKey="comuna_datachile_id" name="Geography" source="Geography"/>

    <Dimension foreignKey="health_system_id" name="Health System">
      <Annotations>
        <Annotation name="es_element_caption">Sistema de salud</Annotation>
      </Annotations>
        
      <Hierarchy hasAll="true">
        <InlineTable alias="health_system">
          <ColumnDefs>
            <ColumnDef name="group_id" type="Numeric"/>
            <ColumnDef name="group_description" type="String"/>
            <ColumnDef name="group_es_description" type="String"/>
            <ColumnDef name="id" type="Numeric"/>
            <ColumnDef name="description" type="String"/>
            <ColumnDef name="es_description" type="String"/>
          </ColumnDefs>
          <Rows>
            <Row>
              <Value column="group_id">1</Value>
              <Value column="group_description">FONASA</Value>
              <Value column="group_es_description">FONASA</Value>
              <Value column="id">1</Value>
              <Value column="description">FONASA Grupo A</Value>
              <Value column="es_description">FONASA Grupo A</Value>
            </Row>
            <Row>
              <Value column="group_id">1</Value>
              <Value column="group_description">FONASA</Value>
              <Value column="group_es_description">FONASA</Value>
              <Value column="id">2</Value>
              <Value column="description">FONASA Grupo B</Value>
              <Value column="es_description">FONASA Grupo B</Value>
            </Row>
            <Row>
              <Value column="group_id">1</Value>
              <Value column="group_description">FONASA</Value>
              <Value column="group_es_description">FONASA</Value>
              <Value column="id">3</Value>
              <Value column="description">FONASA Grupo C</Value>
              <Value column="es_description">FONASA Grupo C</Value>
            </Row>
            <Row>
              <Value column="group_id">1</Value>
              <Value column="group_description">FONASA</Value>
              <Value column="group_es_description">FONASA</Value>
              <Value column="id">4</Value>
              <Value column="description">FONASA Grupo D</Value>
              <Value column="es_description">FONASA Grupo D</Value>
            </Row>
            <Row>
              <Value column="group_id">1</Value>
              <Value column="group_description">FONASA</Value>
              <Value column="group_es_description">FONASA</Value>
              <Value column="id">5</Value>
              <Value column="description">FONASA (No Sabe Grupo)</Value>
              <Value column="es_description">FONASA (No Sabe Grupo)</Value>
            </Row>
            <Row>
              <Value column="group_id">2</Value>
              <Value column="group_description">Fuerzas Armadas, de Orden y Seguridad Pública</Value>
              <Value column="group_es_description">Fuerzas Armadas, de Orden y Seguridad Pública</Value>
              <Value column="id">6</Value>
              <Value column="description">Fuerzas Armadas, de Orden y Seguridad Pública</Value>
              <Value column="es_description">Fuerzas Armadas, de Orden y Seguridad Pública</Value>
            </Row>
            <Row>
              <Value column="group_id">3</Value>
              <Value column="group_description">Isapre</Value>
              <Value column="group_es_description">Isapre</Value>
              <Value column="id">7</Value>
              <Value column="description">Isapre</Value>
              <Value column="es_description">Isapre</Value>
            </Row>
            <Row>
              <Value column="group_id">4</Value>
              <Value column="group_description">Otro</Value>
              <Value column="group_es_description">Otro</Value>
              <Value column="id">8</Value>
              <Value column="description">No data</Value>
              <Value column="es_description">No informa</Value>
            </Row>
            <Row>
              <Value column="group_id">4</Value>
              <Value column="group_description">Otro</Value>
              <Value column="group_es_description">Otro</Value>
              <Value column="id">9</Value>
              <Value column="description">Otro Sistema</Value>
              <Value column="es_description">Otro Sistema</Value>
            </Row>
            <Row>
              <Value column="group_id">4</Value>
              <Value column="group_description">Otro</Value>
              <Value column="group_es_description">Otro</Value>
              <Value column="id">10</Value>
              <Value column="description">No Sabe</Value>
              <Value column="es_description">No Sabe</Value>
            </Row>
            <Row>
              <Value column="group_id">4</Value>
              <Value column="group_description">Otro</Value>
              <Value column="group_es_description">Otro</Value>
              <Value column="id">0</Value>
              <Value column="description">No data</Value>
              <Value column="es_description">No informa</Value>
            </Row>
          </Rows>
        </InlineTable>
        <Level column="group_id" name="Health System Group" nameColumn="group_description" uniqueMembers="true">
          <Annotations>
            <Annotation name="es_caption">Description ES</Annotation>
            <Annotation name="es_element_caption">Grupo</Annotation>
          </Annotations>
          <Property column="group_es_description" name="Description ES"/>
        </Level>
        <Level column="id" name="Health System" nameColumn="description" uniqueMembers="true">
          <Annotations>
            <Annotation name="es_caption">Description ES</Annotation>
            <Annotation name="es_element_caption">Subgrupo</Annotation>
          </Annotations>
          <Property column="es_description" name="Description ES"/>
        </Level>
      </Hierarchy>
    </Dimension>

    <Measure aggregator="count" column="year" name="Number of records" visible="true"/>
    <Measure aggregator="sum" column="expr" name="Expansion Factor Region" visible="true"/>
    <Measure aggregator="sum" column="expc" name="Expansion Factor Comuna" visible="true"/>

    <CalculatedMember dimension="Measures" name="Expansion Factor">
      <Annotations>
        <Annotation name="es_element_caption">Cobertura de salud: Factor de expansión</Annotation>
        <Annotation name="es_format">XXX</Annotation>
      </Annotations>
      <Formula>
        <![CDATA[IIF(Geography.CurrentMember.Level.Name = "Comuna",
                    [Measures].[Expansion Factor Comuna],
                    [Measures].[Expansion Factor Region])]]>
      </Formula>
    </CalculatedMember>
  </Cube>

  <!-- / Health CASEN data cube -->

  <!-- Banking CASEN data cube tiene problemas de muchos N/A -->

  <Cube name="casen_banking">
    <Annotations>
      <Annotation name="source_name">Encuesta CASEN</Annotation>
      <Annotation name="source_link">http://observatorio.ministeriodesarrollosocial.gob.cl/casen-multidimensional/casen/basedatos.php</Annotation>
      <Annotation name="topic">environment</Annotation>
    </Annotations>
    
    <Table name="fact_banking_casen" schema="environment"/>
    
    <DimensionUsage foreignKey="date_id" name="Date" source="Date"/>
    <DimensionUsage foreignKey="comuna_datachile_id" name="Geography" source="Geography"/>

    <DimensionUsage caption="Debit Card" foreignKey="debit_card_id" name="Debit Card" source="Binary Survey Response"/>
    <DimensionUsage caption="Bank Credit Card" foreignKey="credit_card_bank_id" name="Bank Credit Card" source="Binary Survey Response"/>
    <DimensionUsage caption="Store Credit Card" foreignKey="credit_card_store_id" name="Store Credit Card" source="Binary Survey Response"/>
    <DimensionUsage caption="Checks" foreignKey="checks_id" name="Checks" source="Binary Survey Response"/>
    <DimensionUsage caption="Credit Line" foreignKey="credit_line_id" name="Credit Line" source="Binary Survey Response"/>
    
    <Measure aggregator="count" column="date_id" name="Number of records" visible="true"/>
    <Measure aggregator="sum" column="expr" name="Expansion Factor Region" visible="true"/>
    <Measure aggregator="sum" column="expc" name="Expansion Factor Comuna" visible="true"/>

    <CalculatedMember dimension="Measures" name="Expansion Factor">
      <Formula>
        <![CDATA[IIF(Geography.CurrentMember.Level.Name = "Comuna",
                    [Measures].[Expansion Factor Comuna],
                    [Measures].[Expansion Factor Region])]]>
      </Formula>
    </CalculatedMember>
  </Cube>

  <!-- / Banking CASEN data cube -->

  <!-- health_access data cube  -->

  <Cube name="health_access">
    <Annotations>
      <Annotation name="source_name">Indicadores de Acceso a la Salud - DEIS Ministerio de Salud</Annotation>
      <Annotation name="source_link">http://www.deis.cl/</Annotation>
      <Annotation name="topic">health</Annotation>
    </Annotations>

    <Table name="fact_health_access" schema="health"/>

    <Dimension name="Date">
      <Hierarchy hasAll="true">
        <Level column="year" nameColumn="year" name="Year" uniqueMembers="true"/>
      </Hierarchy>
    </Dimension>

    <DimensionUsage foreignKey="region_id" source="Geography Region" name="Geography" />
    
    <Measure aggregator="count" column="date_id" name="Number of records" visible="true"/>

    <Measure aggregator="sum" column="primary_healthcare" name="Primary Healthcare SUM" visible="true">
      <Annotations>
        <Annotation name="es_element_caption">Casos de atención primaria</Annotation>
        <Annotation name="es_format">XXX</Annotation>
      </Annotations>
    </Measure>
    <Measure aggregator="sum" column="specialized_healthcare" name="Specialized Healthcare SUM" visible="true">
      <Annotations>
        <Annotation name="es_element_caption">Casos de atención especializada</Annotation>
        <Annotation name="es_format">XXX</Annotation>
      </Annotations>
    </Measure>
    <Measure aggregator="sum" column="urgency_healthcare" name="Urgency Healthcare SUM" visible="true">
      <Annotations>
        <Annotation name="es_element_caption">Casos de urgencias médicas</Annotation>
        <Annotation name="es_format">XXX</Annotation>
      </Annotations>
    </Measure>

    <Measure aggregator="avg" column="primary_healthcare" name="Primary Healthcare AVG" visible="true"/>
    <Measure aggregator="avg" column="specialized_healthcare" name="Specialized Healthcare AVG" visible="true"/>
    <Measure aggregator="avg" column="urgency_healthcare" name="Urgency Healthcare AVG" visible="true"/>
    
    <Measure aggregator="avg" column="dental_discharges_per_100_inhabitants" name="Dental Discharges Per 100 inhabitants AVG" visible="true">
      <Annotations>
        <Annotation name="es_element_caption">Altas dentales cada 100 habitantes</Annotation>
        <Annotation name="es_format">XXX</Annotation>
      </Annotations>
    </Measure>

  </Cube>

  <!-- / health_access data cube -->

  <!-- life_expectancy data cube  -->

  <Cube name="life_expectancy">
    <Table name="fact_life_expectancy" schema="health"/>
    
    <DimensionUsage foreignKey="date_id" name="Date" source="Date"/>

    <DimensionUsage foreignKey="region_id" source="Geography Region" name="Geography" />
    <DimensionUsage foreignKey="sex_id" name="Sex" source="Sex"/>
    
    <Measure aggregator="count" column="date_id" name="Number of records" visible="true"/>

    <Measure aggregator="avg" column="life_expectancy" name="Life Expectancy AVG" visible="true"/>
    
    <Measure aggregator="avg" column="mortality_rate_per_100_inhabitants" name="Mortality rate per 100 inhabitants AVG" visible="true"/>

  </Cube>

  <!-- / life_expectancy data cube -->

  <!-- death_causes data cube  -->

  <Cube name="death_causes">
    <Annotations>
      <Annotation name="source_name">Causas de Muerte - DEIS Ministerio de Salud</Annotation>
      <Annotation name="source_link">http://www.deis.cl/</Annotation>
      <Annotation name="topic">health</Annotation>
    </Annotations>

    <Table name="fact_death_causes" schema="health"/>
    
    <DimensionUsage foreignKey="date_id" name="Date" source="Date"/>
    <DimensionUsage foreignKey="region_id" name="Geography" source="Geography Region"/>
    <DimensionUsage foreignKey="sex_id" name="Sex" source="Sex"/>
    
    <Dimension foreignKey="cie_10_id" name="CIE 10">
      <Hierarchy hasAll="true">
        <InlineTable alias="cie_10">
          <ColumnDefs>
            <ColumnDef name="id" type="String"/>
            <ColumnDef name="description" type="String"/>
            <ColumnDef name="es_description" type="String"/>
          </ColumnDefs>
          <Rows>
            <Row>
              <Value column="id">C00-D48</Value>
              <Value column="description">Tumors (Neoplasms)</Value>
              <Value column="es_description">Tumores (neoplasias)</Value>
            </Row>
            <Row>
              <Value column="id">E00-E90</Value>
              <Value column="description">Endocrine, nutritional and metabolic diseases</Value>
              <Value column="es_description">Enfermedades endocrinas, nutricionales y metabolicas</Value>
            </Row>
            <Row>
              <Value column="id">I00-I99</Value>
              <Value column="description">Diseases of the circulatory system</Value>
              <Value column="es_description">Enfermedades del sistema circulatorio</Value>
            </Row>
            <Row>
              <Value column="id">J00-J99</Value>
              <Value column="description">Diseases of the respiratory system</Value>
              <Value column="es_description">Enfermedades del sistema respiratorio</Value>
            </Row>
            <Row>
              <Value column="id">K00-K93</Value>
              <Value column="description">Diseases of the digestive system</Value>
              <Value column="es_description">Enfermedades del sistema digestivo</Value>
            </Row>
            <Row>
              <Value column="id">V01-Y98</Value>
              <Value column="description">External causes of morbidity and mortality</Value>
              <Value column="es_description">Causa Externa de mortalidad</Value>
            </Row>
            <Row>
              <Value column="id">B20-B24</Value>
              <Value column="description">Human immunodeficiency virus [HIV] disease</Value>
              <Value column="es_description">Infecciones por VIH y SIDA</Value>
            </Row>
            <Row>
              <Value column="id">V01-V99</Value>
              <Value column="description">Transport accidents</Value>
              <Value column="es_description">Accidentes de tránsito</Value>
            </Row>
            <Row>
              <Value column="id">X60-X84</Value>
              <Value column="description">Intentional self-harm</Value>
              <Value column="es_description">Lesiones autoinfligidas intencionalmente</Value>
            </Row>
          </Rows>
        </InlineTable>
        
        <Level column="id" name="CIE 10" nameColumn="description" uniqueMembers="true">
          <Annotations>
            <Annotation name="es_caption">Description ES</Annotation>
          </Annotations>
          <Property column="es_description" name="Description ES"/>
        </Level>
      </Hierarchy>
    </Dimension>

    <Measure aggregator="count" column="date_id" name="Number of records" visible="true"/>

    <Measure aggregator="avg" column="casualities_count" name="Casualities Count AVG" visible="true"/>
    <Measure aggregator="sum" column="casualities_count" name="Casualities Count SUM" visible="true"/>
    
    <Measure aggregator="avg" column="casualities_rate_per_100_inhabitants" name="Casualities rate per 100 inhabitants" visible="true"/>

  </Cube>

  <!-- / death_causes data cube -->

  <!-- disabilities data cube  -->

  <Cube name="disabilities">
    <Annotations>
      <Annotation name="source_name">Encuesta Nacional de Discapacidad (ENDISC) - SENADIS</Annotation>
      <Annotation name="source_link">http://www.senadis.cl/pag/355/1197/ii_estudio_nacional_de_discapacidad</Annotation>
      <Annotation name="topic">health</Annotation>
    </Annotations>

    <Table name="fact_disability" schema="health"/>
    
    <DimensionUsage foreignKey="date_id" name="Date" source="Date"/>

    <DimensionUsage foreignKey="region" source="Geography Region" name="Geography" />
    <DimensionUsage foreignKey="sex" name="Sex" source="Sex"/>
    
    <Dimension foreignKey="disability_grade" name="Disability Grade">
      <Annotations>
        <Annotation name="es_element_caption">Grado de discapacidad</Annotation>
      </Annotations>

      <Hierarchy hasAll="true">
        <InlineTable alias="disability_grade">
          <ColumnDefs>
            <ColumnDef name="id" type="Numeric"/>
            <ColumnDef name="description" type="String"/>
            <ColumnDef name="es_description" type="String"/>
          </ColumnDefs>
          <Rows>
            <Row>
              <Value column="id">1</Value>
              <Value column="description">No disability</Value>
              <Value column="es_description">sin discapacidad</Value>
            </Row>
            <Row>
              <Value column="id">2</Value>
              <Value column="description">Slight to moderate</Value>
              <Value column="es_description">leve a moderada</Value>
            </Row>
            <Row>
              <Value column="id">3</Value>
              <Value column="description">Severe</Value>
              <Value column="es_description">severa</Value>
            </Row>
          </Rows>
        </InlineTable>
        
        <Level column="id" name="Disability Grade" nameColumn="description" uniqueMembers="true">
          <Annotations>
            <Annotation name="es_caption">Description ES</Annotation>
          </Annotations>
          <Property column="es_description" name="Description ES"/>
        </Level>
      </Hierarchy>
    </Dimension>

    <Measure aggregator="count" column="date_id" name="Number of records" visible="true"/>
    <Measure aggregator="sum" column="weight" name="Expansion Factor Region" visible="true"/>

  </Cube>

  <!-- / disabilities data cube -->

  <!-- crimes data cube  -->

  <Cube name="crimes">
    <Annotations>
      <Annotation name="source_name">Carabineros de Chile</Annotation>
      <Annotation name="source_link">http://www.seguridadpublica.gov.cl/media/2017/08/frec_casos_dmcs_mensual_2001_2017w.xlsx</Annotation>
      <Annotation name="topic">environment</Annotation>
    </Annotations>

    <Table name="fact_crimes" schema="safety"/>
    
    <Dimension name="Date">
      <Hierarchy hasAll="true">
        <Level column="year" nameColumn="year" name="Year" uniqueMembers="true"/>
      </Hierarchy>
    </Dimension>

    <DimensionUsage foreignKey="comuna_id" name="Geography" source="Geography"/>
    
    <Dimension foreignKey="felony_id" name="Crime">
      <Annotations>
        <Annotation name="es_element_caption">Crimen</Annotation>
      </Annotations>
        
      <Hierarchy hasAll="true">

        <InlineTable alias="felony_es">
          <ColumnDefs>
            <ColumnDef name="group_id" type="Numeric"/>
            <ColumnDef name="group_description" type="String"/>
            <ColumnDef name="group_es_description" type="String"/>
            <ColumnDef name="id" type="Numeric" />
            <ColumnDef name="description" type="String" />
            <ColumnDef name="es_description" type="String" />
          </ColumnDefs>
          <Rows>
            <Row>
              <Value column="group_id">1</Value>
              <Value column="group_description">Theft</Value>
              <Value column="group_es_description">Robo</Value>
              <Value column="id">1</Value>
              <Value column="description">Theft with violence or intimidation</Value>
              <Value column="es_description">Robo con violencia o intimidación</Value>
            </Row>
          <Row>
              <Value column="group_id">1</Value>
              <Value column="group_description">Theft</Value>
              <Value column="group_es_description">Robo</Value>
              <Value column="id">2</Value>
              <Value column="description">Surprise theft</Value>
              <Value column="es_description">Robo por sorpresa</Value>
            </Row>
          <Row>
              <Value column="group_id">1</Value>
              <Value column="group_description">Theft</Value>
              <Value column="group_es_description">Robo</Value>
              <Value column="id">3</Value>
              <Value column="description">Theft with force</Value>
              <Value column="es_description">Robo con fuerza</Value>
            </Row>
          <Row>
              <Value column="group_id">1</Value>
              <Value column="group_description">Theft</Value>
              <Value column="group_es_description">Robo</Value>
              <Value column="id">4</Value>
              <Value column="description">Vehicle theft</Value>
              <Value column="es_description">Robo de vehículo</Value>
            </Row>
          <Row>
              <Value column="group_id">1</Value>
              <Value column="group_description">Theft</Value>
              <Value column="group_es_description">Robo</Value>
              <Value column="id">5</Value>
              <Value column="description">Vehicle accessories theft</Value>
              <Value column="es_description">Robo accesorios de vehículo</Value>
            </Row>
          <Row>
              <Value column="group_id">1</Value>
              <Value column="group_description">Theft</Value>
              <Value column="group_es_description">Robo</Value>
              <Value column="id">6</Value>
              <Value column="description">Theft in an inhabited place</Value>
              <Value column="es_description">Robo en lugar habitado</Value>
            </Row>
          <Row>
              <Value column="group_id">1</Value>
              <Value column="group_description">Theft</Value>
              <Value column="group_es_description">Robo</Value>
              <Value column="id">7</Value>
              <Value column="description">Theft in an uninhabited place</Value>
              <Value column="es_description">Robo en lugar no habitado</Value>
            </Row>
          <Row>
              <Value column="group_id">1</Value>
              <Value column="group_description">Theft</Value>
              <Value column="group_es_description">Robo</Value>
              <Value column="id">8</Value>
              <Value column="description">Other thefts with force</Value>
              <Value column="es_description">Otros robos con fuerza</Value>
            </Row>
          <Row>
              <Value column="group_id">2</Value>
              <Value column="group_description">Larcenies</Value>
              <Value column="group_es_description">Hurtos</Value>
              <Value column="id">9</Value>
              <Value column="description">Larcenies</Value>
              <Value column="es_description">Hurtos</Value>
            </Row>
          <Row>
              <Value column="group_id">3</Value>
              <Value column="group_description">Injuries</Value>
              <Value column="group_es_description">Lesiones</Value>
              <Value column="id">10</Value>
              <Value column="description">Injuries</Value>
              <Value column="es_description">Lesiones</Value>
            </Row>
          <Row>
              <Value column="group_id">3</Value>
              <Value column="group_description">Injuries</Value>
              <Value column="group_es_description">Lesiones</Value>
              <Value column="id">11</Value>
              <Value column="description">Serious injuries</Value>
              <Value column="es_description">Lesiones graves</Value>
            </Row>
          <Row>
              <Value column="group_id">3</Value>
              <Value column="group_description">Injuries</Value>
              <Value column="group_es_description">Lesiones</Value>
              <Value column="id">12</Value>
              <Value column="description">Minor injuries</Value>
              <Value column="es_description">Lesiones leves</Value>
            </Row>
          <Row>
              <Value column="group_id">4</Value>
              <Value column="group_description">Homicides</Value>
              <Value column="group_es_description">Homicidios</Value>
              <Value column="id">13</Value>
              <Value column="description">Homicides</Value>
              <Value column="es_description">Homicidios</Value>
            </Row>
          <Row>
              <Value column="group_id">5</Value>
              <Value column="group_description">Violation</Value>
              <Value column="group_es_description">Violación</Value>
              <Value column="id">14</Value>
              <Value column="description">Violation</Value>
              <Value column="es_description">Violación</Value>
            </Row>
          </Rows>
        </InlineTable>
        <Level column="group_id" name="Crime Group" nameColumn="group_description" uniqueMembers="true">
          <Annotations>
            <Annotation name="es_caption">Description ES</Annotation>
          </Annotations>
          <Property column="group_es_description" name="Description ES"/>
        </Level>
        <Level column="id" name="Crime" nameColumn="description" uniqueMembers="true">
          <Annotations>
            <Annotation name="es_caption">Description ES</Annotation>
          </Annotations>
          <Property column="es_description" name="Description ES"/>
        </Level>
      </Hierarchy>
    </Dimension>

    <Measure aggregator="count" column="year" name="Number of records" visible="true"/>
    <Measure aggregator="sum" column="cases" name="Cases" visible="true"/>

  </Cube>

  <!-- / crimes data cube -->

  <VirtualCube name="exports_and_imports">
    <VirtualCubeDimension name="Date"/>
    <VirtualCubeDimension name="Geography"/>
    <VirtualCubeDimension name="Country" />

    <VirtualCubeMeasure cubeName="exports" name="[Measures].[FOB US]" visible="false"/>
    <VirtualCubeMeasure cubeName="imports" name="[Measures].[CIF US]" visible="false"/>

    <CalculatedMember dimension="Measures" name="FOB" visible="true">
      <Formula><![CDATA[ValidMeasure([Measures].[FOB US])]]></Formula>
    </CalculatedMember>

    <CalculatedMember dimension="Measures" name="CIF" visible="true">
      <Formula><![CDATA[ValidMeasure([Measures].[CIF US])]]></Formula>
    </CalculatedMember>

    <CalculatedMember dimension="Measures" name="Trade Balance" visible="true">
      <Formula><![CDATA[([Measures].[FOB US] - [Measures].[CIF US])]]></Formula>
    </CalculatedMember>

    <CalculatedMember dimension="Measures" name="Trade Exchange" visible="true">
      <Formula><![CDATA[([Measures].[FOB] + [Measures].[CIF])]]></Formula>
    </CalculatedMember>

  </VirtualCube>
</Schema>
